(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{123:function(e){e.exports=JSON.parse('{"orga-common":{"delete":"删除","edit":"编辑","action":"操作","save":"保存","back":"取消","search":"搜索","add":"添加","orga":"组织","name":"名称","detail":"详情","close":"关闭"},"orga-table":{"name":"用户名","nickname":"姓名","phone":"手机号","email":"邮箱","org":"部门","account":"帐号","userGroup":"用户组","orgaName":"所属机构","password":"初始密码","type":"用户目录","typeChild":"目录二级","thirdparty":"LDAP/AP","internal":"内部目录","dingding":"钉钉","acc":"ACC","wechat":"企业微信","all":"所有"},"adduser-module":{"addUser":"添加用户","editUser":"编辑用户","detailUser":"详情用户","userType":"用户类型","name":"用户名","nickname":"姓名","phone":"手机号","email":"邮箱","org":"部门","account":"帐号","orgaName":"所属机构","password":"初始密码","type":"用户目录","typeChild":"目录二级","thirdparty":"LDAP/AP","internal":"内部目录","dingding":"钉钉","acc":"ACC","wechat":"企业微信","all":"所有","userTypeRequired":"用户类型必填!","emailRequired":"邮箱必填!","emailFormat":"邮箱格式不正确!","passwordRequired":"密码必填!","phoneRequired":"手机号必填!","nameRequired":"用户名必填!","nicknameRequired":"请输入姓名!"},"orga-label":{"addUser":"添加用户","orgaName":"机构名称","parentOrg":"上级机构","parentOrgPlaceholder":"请选择上级机构","parentOrgRequired":"上级机构必填!","user":"用户","searchUser":"搜索用户名称","searchUserPhoneEmail":"搜索姓名、手机号、邮箱","searchUserAccount":"搜索用户名、帐号","userType":"用户目录"},"orga-tab":{"all":"全部","in":"内部","out":"外部"}}')},124:function(e,t,r){"use strict";var a=r(26);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DOMAIN_USER_STORE",{enumerable:!0,get:function(){return u.DOMAIN_USER_STORE}}),Object.defineProperty(t,"ORG_STORE",{enumerable:!0,get:function(){return l.ORG_STORE}}),Object.defineProperty(t,"USER_STORE",{enumerable:!0,get:function(){return i.USER_STORE}}),t.orgStores=void 0;var n=a(r(21)),u=r(162),l=r(163),i=r(159);var o;t.orgStores=(o={},(0,n.default)(o,l.ORG_STORE,new l.OrgStore),(0,n.default)(o,i.USER_STORE,new i.UserStore),(0,n.default)(o,u.DOMAIN_USER_STORE,new u.DomainUserStore),o)},137:function(e,t,r){"use strict";var a=r(26);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"user_cn",{enumerable:!0,get:function(){return n.default}});var n=a(r(160))},159:function(e,t,r){"use strict";var a=r(26);Object.defineProperty(t,"__esModule",{value:!0}),t.updatePassword=t.recoverPassword=t.UserStore=t.USER_STORE=void 0;var n,u,l,i,o,d,c,f,s,p,m,g,v,b,y,O,h,w,E,P,j,_,k,x,D,S=a(r(19)),I=a(r(48)),U=a(r(39)),A=a(r(35)),R=a(r(34)),N=(a(r(21)),a(r(40))),M=(a(r(41)),r(5)),L=r(18);t.UserStore=(n=(0,A.default)((function e(){(0,R.default)(this,e),(0,U.default)(this,"userData",u,this),(0,U.default)(this,"rolePage",l,this),(0,U.default)(this,"qywxconfig",i,this),(0,U.default)(this,"agentConfig",o,this),(0,U.default)(this,"getUserList",d,this),(0,U.default)(this,"editUser",c,this),(0,U.default)(this,"addUser",f,this),(0,U.default)(this,"deleteUser",s,this),(0,U.default)(this,"findUserPageAction",p,this),(0,U.default)(this,"findUser",m,this),(0,U.default)(this,"createUserAction",g,this),(0,U.default)(this,"updateUserAction",v,this),(0,U.default)(this,"deleteUserAction",b,this),(0,U.default)(this,"findRolePageAction",y,this),(0,U.default)(this,"deleteRoleUserAction",O,this),(0,U.default)(this,"createRoleUserAction",h,this),(0,U.default)(this,"findRoleUserListAction",w,this),(0,U.default)(this,"findRoleUserListQueryByRole",E,this),(0,U.default)(this,"findUserRoleAdmin",P,this),(0,U.default)(this,"findRoleUserPageAction",j,this),(0,U.default)(this,"findUserOrgaList",_,this),(0,U.default)(this,"findUserGroupList",k,this),(0,U.default)(this,"findUserDirList",x,this),(0,U.default)(this,"deleteExternalMember",D,this)})),u=(0,N.default)(n.prototype,"userData",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=(0,N.default)(n.prototype,"rolePage",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{defaultCurrent:1,pageSize:6,total:1}}}),i=(0,N.default)(n.prototype,"qywxconfig",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),o=(0,N.default)(n.prototype,"agentConfig",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),d=(0,N.default)(n.prototype,"getUserList",[M.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.userData=t}}}),c=(0,N.default)(n.prototype,"editUser",[M.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.userData=e.userData.map((function(e){return e.id===t.id?t:e}))}}}),f=(0,N.default)(n.prototype,"addUser",[M.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.userData=e.userData.concat(t)}}}),s=(0,N.default)(n.prototype,"deleteUser",[M.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.userData=e.userData.filter((function(e){return e.id!==t}))}}}),p=(0,N.default)(n.prototype,"findUserPageAction",[M.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,I.default)(S.default.mark((function e(t,r){return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.Axios.post("/user/user/findUserPage",t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}}),m=(0,N.default)(n.prototype,"findUser",[M.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,I.default)(S.default.mark((function e(t,r){var a;return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("id",t),e.next=4,L.Axios.post("/user/user/findUser",a,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}}),g=(0,N.default)(n.prototype,"createUserAction",[M.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,I.default)(S.default.mark((function e(t,r){return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.Axios.post("/user/user/createUser",t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}}),v=(0,N.default)(n.prototype,"updateUserAction",[M.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,I.default)(S.default.mark((function e(t,r){return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.Axios.post("/user/user/updateUser",t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}}),b=(0,N.default)(n.prototype,"deleteUserAction",[M.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,I.default)(S.default.mark((function e(t,r){return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.Axios.post("/user/user/deleteUser",t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}}),y=(0,N.default)(n.prototype,"findRolePageAction",[M.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,I.default)(S.default.mark((function t(r,a){var n;return S.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.Axios.post("/role/findRolePage",r,a);case 2:return 0===(n=t.sent).code&&(e.rolePage.total=n.data.totalPage),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}}),O=(0,N.default)(n.prototype,"deleteRoleUserAction",[M.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,I.default)(S.default.mark((function e(t,r){var a;return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("id",t),e.next=4,L.Axios.post("/roleUser/deleteRoleUser",a,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}}),h=(0,N.default)(n.prototype,"createRoleUserAction",[M.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,I.default)(S.default.mark((function e(t,r){return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.Axios.post("/roleUser/createRoleUser",t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}}),w=(0,N.default)(n.prototype,"findRoleUserListAction",[M.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,I.default)(S.default.mark((function e(t,r){return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.Axios.post("/roleUser/findRoleUserList",t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}}),E=(0,N.default)(n.prototype,"findRoleUserListQueryByRole",[M.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,I.default)(S.default.mark((function e(t,r){return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.Axios.post("/roleUser/findRoleUserListQueryByRole",t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}}),P=(0,N.default)(n.prototype,"findUserRoleAdmin",[M.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,I.default)(S.default.mark((function e(t,r){var a;return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("userId",t),e.next=4,L.Axios.post("/roleUser/findUserRoleAdmin",a,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}}),j=(0,N.default)(n.prototype,"findRoleUserPageAction",[M.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,I.default)(S.default.mark((function e(t,r){return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.Axios.post("/roleUser/findRoleUserPage",t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}}),_=(0,N.default)(n.prototype,"findUserOrgaList",[M.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,I.default)(S.default.mark((function e(t,r){return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.Axios.post("/user/userOrga/findUserOrgaList",t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}}),k=(0,N.default)(n.prototype,"findUserGroupList",[M.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,I.default)(S.default.mark((function e(t,r){return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.Axios.post("/usergroupUser/findUserList",t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}}),x=(0,N.default)(n.prototype,"findUserDirList",[M.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,I.default)(S.default.mark((function e(t,r){return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.Axios.post("/user/userdir/findAllList",t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}}),D=(0,N.default)(n.prototype,"deleteExternalMember",[M.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,I.default)(S.default.mark((function e(t){return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.Axios.post("/memberSaas/deleteMember",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),n),t.USER_STORE="userStore",t.updatePassword=function(){var e=(0,I.default)(S.default.mark((function e(t){return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.Axios.post("/user/user/updatePassword",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.recoverPassword=function(){var e=(0,I.default)(S.default.mark((function e(t){return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.Axios.post("/user/user/recoverPassword",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},160:function(e,t,r){"use strict";r.r(t);var a=r(123);t.default=a},162:function(e,t,r){"use strict";var a=r(26);Object.defineProperty(t,"__esModule",{value:!0}),t.DomainUserStore=t.DOMAIN_USER_STORE=void 0;var n,u,l,i,o=a(r(19)),d=a(r(48)),c=a(r(39)),f=a(r(35)),s=a(r(34)),p=a(r(21)),m=a(r(40)),g=(a(r(41)),r(5)),v=r(18);t.DomainUserStore=(n=(0,f.default)((function e(){(0,s.default)(this,e),(0,c.default)(this,"privilegeDomainUsers",u,this),(0,c.default)(this,"getDomainUser",l,this),(0,c.default)(this,"deleteDomainUser",i,this),(0,p.default)(this,"findDmUserPageAction",function(){var e=(0,d.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.Axios.post("/dmUser/findDmUserPage",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,p.default)(this,"deleteDmUserAction",function(){var e=(0,d.default)(o.default.mark((function e(t){var r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("id",t),e.next=4,v.Axios.post("/dmUser/deleteDmUser",r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,p.default)(this,"findDmUserListAction",function(){var e=(0,d.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.Axios.post("/dmUser/findDmUserList",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,p.default)(this,"createDmUserAction",function(){var e=(0,d.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.Axios.post("/dmUser/createDmUser",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,p.default)(this,"createDefaultRole",function(){var e=(0,d.default)(o.default.mark((function e(t){var r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("userId",t.user.id),r.append("domainId",t.domainId),e.next=5,v.Axios.post("/dmRole/createDefaultRole",r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,p.default)(this,"findDmRoleUserListAction",function(){var e=(0,d.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.Axios.post("/dmRoleUser/findDmRoleUserList",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,p.default)(this,"findDmRoleUserListByRole",function(){var e=(0,d.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.Axios.post("/dmRoleUser/findDmRoleUserListByRole",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,p.default)(this,"createDmRoleUserAction",function(){var e=(0,d.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.Axios.post("/dmRoleUser/createDmRoleUser",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,p.default)(this,"deleteDmRoleUserAction",function(){var e=(0,d.default)(o.default.mark((function e(t){var r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("id",t),e.next=4,v.Axios.post("/dmRoleUser/deleteDmRoleUser",r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,p.default)(this,"findDmRoleListAction",function(){var e=(0,d.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.Axios.post("/dmRole/findDmRoleList",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})),u=(0,m.default)(n.prototype,"privilegeDomainUsers",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=(0,m.default)(n.prototype,"getDomainUser",[g.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.privilegeDomainUsers=t}}}),i=(0,m.default)(n.prototype,"deleteDomainUser",[g.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.privilegeDomainUsers=e.privilegeDomainUsers.filter((function(e){return e.id!==t}))}}}),n),t.DOMAIN_USER_STORE="domainUserStore"},163:function(e,t,r){"use strict";var a=r(26);Object.defineProperty(t,"__esModule",{value:!0}),t.OrgStore=t.ORG_STORE=void 0;var n,u,l,i,o,d,c,f,s,p,m,g,v,b=a(r(19)),y=a(r(48)),O=a(r(39)),h=a(r(35)),w=a(r(34)),E=a(r(21)),P=a(r(40)),j=(a(r(41)),r(5)),_=r(18);function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){(0,E.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.OrgStore=(n=(0,h.default)((function e(){(0,w.default)(this,e),(0,O.default)(this,"treeData",u,this),(0,O.default)(this,"selectData",l,this),(0,O.default)(this,"selectTreeOrgDetail",i,this),(0,O.default)(this,"addTree",o,this),(0,O.default)(this,"editTree",d,this),(0,O.default)(this,"findOpenUserDirListAction",c,this),(0,O.default)(this,"deleteOrgaAction",f,this),(0,O.default)(this,"findOrgaAction",s,this),(0,O.default)(this,"findOrgaTreeAction",p,this),(0,O.default)(this,"deleteUserOrgaAction",m,this),(0,O.default)(this,"findUserOrgaPageAction",g,this),(0,O.default)(this,"updateOrgaSortAction",v,this)})),u=(0,P.default)(n.prototype,"treeData",[j.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=(0,P.default)(n.prototype,"selectData",[j.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),i=(0,P.default)(n.prototype,"selectTreeOrgDetail",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.selectData=t}}}),o=(0,P.default)(n.prototype,"addTree",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.treeData=e.treeData.map((function(e){return e.children?x(x({},e),{},{children:e.children.concat(t)}):x(x({},e),{},{children:[t]})}))}}}),d=(0,P.default)(n.prototype,"editTree",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.treeData=e.treeData.map((function(e){return e.orgaId===t.orgaId?x(x({},e),t):(e.children=e.children.map((function(e){return e.orgaId===t.orgaId?x(x({},e),t):e})),e)}))}}}),c=(0,P.default)(n.prototype,"findOpenUserDirListAction",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(0,y.default)(b.default.mark((function e(){return b.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.Axios.post("/user/userdir/findOpenList");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))}}),f=(0,P.default)(n.prototype,"deleteOrgaAction",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,y.default)(b.default.mark((function t(r){var a,n;return b.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=new FormData).append("id",r),t.next=4,_.Axios.post("/user/orga/deleteOrga",a);case 4:return(n=t.sent).code||(e.treeData=e.treeData.filter((function(e){if(e.orgaId!==r)return e.children&&e.children.length>0&&(e.children=e.children.filter((function(e){return e.orgaId!==r}))),e}))),t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),s=(0,P.default)(n.prototype,"findOrgaAction",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,y.default)(b.default.mark((function e(t){var r;return b.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("id",t),e.next=4,_.Axios.post("/user/orga/findOrga",r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),p=(0,P.default)(n.prototype,"findOrgaTreeAction",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,y.default)(b.default.mark((function t(r){var a;return b.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.Axios.post("/user/orga/findOrgaTree",r);case 2:return(a=t.sent).code||(e.treeData=a.data),t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),m=(0,P.default)(n.prototype,"deleteUserOrgaAction",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,y.default)(b.default.mark((function e(t){var r;return b.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("id",t),e.next=4,_.Axios.post("/user/userOrga/deleteUserOrga",r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),g=(0,P.default)(n.prototype,"findUserOrgaPageAction",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,y.default)(b.default.mark((function e(t){var r;return b.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.Axios.post("/user/userOrga/findUserOrgaPage",t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),v=(0,P.default)(n.prototype,"updateOrgaSortAction",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,y.default)(b.default.mark((function e(t){return b.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.Axios.post("/user/orga/updateSort",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),n),t.ORG_STORE="orgStore"},799:function(e,t,r){"use strict";var a=r(26);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BaseModal",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"BreadCrumb",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"Btn",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"ListAction",{enumerable:!0,get:function(){return d.ListAction}}),Object.defineProperty(t,"Page",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"Profile",{enumerable:!0,get:function(){return l.default}});var n=a(r(944)),u=a(r(947)),l=a(r(949)),i=a(r(951)),o=a(r(898)),d=r(953)},829:function(e,t,r){"use strict";var a=r(26);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Directory",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"DomainUser",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"Orga",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"User",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"UserGroup",{enumerable:!0,get:function(){return o.default}});var n=a(r(941)),u=a(r(960)),l=a(r(965)),i=a(r(973)),o=a(r(980))},842:function(e,t,r){"use strict";var a=r(26);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(0)),u=r(18);r(956);t.default=function(e){var t=e.link,r=e.module,a=(0,u.getUser)();return n.default.createElement("div",{className:"thoughtware_mask"},n.default.createElement("div",null,"当前为统一登录模式"),n.default.createElement("div",{className:"thoughtware_mask_action",onClick:function(){return e=JSON.parse(localStorage.getItem(u.LOCALSTORAGE_KEY.AUTH_CONFIG)).authServiceUrl,r="".concat(e,"/#/setting").concat(t,"?").concat((0,u.parseUserSearchParams)({ticket:a.ticket})),window.open(r);var e,r}},"请前往EAS进行",r,"相关操作。"))}},853:function(e,t,r){"use strict";var a=r(26),n=r(149);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(409);var u=a(r(408));r(403);var l=a(r(402)),i=a(r(453));r(405);var o=a(r(406)),d=a(r(96)),c=a(r(21)),f=a(r(57)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var a={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=u?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(a,l,i):a[l]=e[l]}return a.default=e,r&&r.set(e,a),a}(r(0)),p=r(65),m=r(18),g=r(799);function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,c.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r(963);t.default=(0,p.inject)("userStore")((0,p.observer)((function(e){var t=e.visible,r=e.handleOk,a=e.handleCancel,n=e.allSelectIds,c=e.userStore,p=e.selectedRowKeys,v=e.setSelectedRowKeys,b=e.userDir,O=c.findUserPageAction,h=(0,s.useState)([]),w=(0,f.default)(h,2),E=w[0],P=w[1],j={pageSize:6,currentPage:1},_=(0,s.useState)({}),k=(0,f.default)(_,2),x=k[0],D=k[1],S=(0,s.useState)({pageParam:j}),I=(0,f.default)(S,2),U=I[0],A=I[1],R=(0,s.useState)([]),N=(0,f.default)(R,2),M=N[0],L=N[1];(0,s.useEffect)((function(){b?L(b):m.Axios.post("/user/userdir/findAllList").then((function(e){e.code||L(e.data)}))}),[b]),(0,s.useEffect)((function(){T()}),[U]);var T=function(){O(U).then((function(e){0===e.code&&(D({totalRecord:e.data.totalRecord,totalPage:e.data.totalPage}),P(e.data.dataList))}))},C=function(e){return n&&n.some((function(t){return t===e.id}))},z={selectedRowKeys:p,onSelectAll:function(e,t,r){var a=r.map((function(e){return e&&e.id})).filter((function(e){return void 0!==e}));if(e){var n=Array.from(new Set([].concat((0,d.default)(a),(0,d.default)(p))));v(n)}else{var u=p.filter((function(e){return!a.includes(e)}));v(u)}},onSelect:function(e){return W(e)},getCheckboxProps:function(e){return{disabled:C(e)}}},W=function(e){C(e)||(p.indexOf(e.id)>=0?p.splice(p.indexOf(e.id),1):p.push(e.id),v((0,d.default)(p)))},F=[{title:"姓名",dataIndex:"nickname",key:"nickname",width:"20%",ellipsis:!0,render:function(e,t){return s.default.createElement(o.default,null,s.default.createElement(g.Profile,{userInfo:t}),e)}},{title:"用户名",dataIndex:"name",key:"name",width:"20%",ellipsis:!0,render:function(e){return e||"--"}},{title:"手机号",dataIndex:"phone",key:"phone",width:"20%",ellipsis:!0,render:function(e){return e||"--"}},{title:"邮箱",dataIndex:"email",key:"email",width:"25%",ellipsis:!0,render:function(e){return e||"--"}},{title:"用户目录",dataIndex:"dirId",key:"dirId",width:"15%",ellipsis:!0,render:function(e){var t=M.findIndex((function(t){return t.id===e}));return t>-1?M[t].name:"--"}}];return s.default.createElement(g.BaseModal,{title:"选择用户",visible:t,onCancel:a,onOk:r,width:800,destroyOnClose:!0},s.default.createElement("div",{className:"user-add-table"},s.default.createElement(l.default,{placeholder:"姓名、用户名、手机号、邮箱",style:{width:240},onPressEnter:function(e){return function(e){var t=y(y({},U),{},{accent:e.target.value,pageParam:j});A(t)}(e)},prefix:s.default.createElement(i.default,{style:{fontSize:"var(--thoughtware-icon-size-16)"}})}),s.default.createElement("div",{style:{paddingTop:10}},s.default.createElement(u.default,{columns:F,dataSource:E,rowSelection:z,onRow:function(e){return{onClick:function(){return W(e)}}},rowKey:function(e){return e.id},pagination:!1}),s.default.createElement(g.Page,{currentPage:U.pageParam.currentPage,changPage:function(e){var t=y(y({},U),{},{pageParam:{pageSize:6,currentPage:e}});A(t)},page:x}))))})))},898:function(e,t,r){"use strict";var a=r(26);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(405);var n=a(r(406)),u=a(r(0));r(945);t.default=function(e){var t=e.icon,r=e.type,a=e.title,l=e.onClick,i=e.isMar,o=e.children;return u.default.createElement("div",{className:"user-btn ".concat(r?"user-btn-".concat(r):""," ").concat(i?"user-btn-mar":""),onClick:l},u.default.createElement(n.default,null,t&&u.default.createElement("span",{className:"user-btn-icon"},t),o||a))}},899:function(e,t,r){"use strict";var a=r(26),n=r(149);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=a(r(19));r(776);var l=a(r(774));r(449);var i=a(r(448));r(403);var o=a(r(402));r(473);var d=a(r(98)),c=a(r(95)),f=a(r(48)),s=a(r(21)),p=a(r(57)),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=b(t);if(r&&r.has(e))return r.get(e);var a={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=u?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(a,l,i):a[l]=e[l]}return a.default=e,r&&r.set(e,a),a}(r(0)),g=r(94),v=["role","group","orga"];function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(b=function(e){return e?r:t})(e)}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,s.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.default=function(e){var t,r,a=e.isEdit,n=e.data,s=void 0===n?{}:n,b=e.visible,y=e.bgroup,h=e.userStore,w=e.getUserPage,E=e.handleCancel,P=e.userDir,j=void 0===P?[]:P,_=e.adduserform,k=h.rolePage,x=h.createRoleUserAction,D=h.createUserAction,S=h.findRolePageAction,I=h.updateUserAction,U=(0,g.useTranslation)().t,A=(0,m.useState)(1),R=(0,p.default)(A,2),N=R[0],M=R[1],L=(0,m.useState)([]),T=(0,p.default)(L,2),C=T[0],z=T[1];(0,m.useEffect)((function(){var e,t;b&&(a?(z(s.roleList),_.setFieldsValue(O(O({},s),{},{role:(s.roleList||[]).map((function(e){return e.id})),group:(null==s||null===(e=s.groupList)||void 0===e?void 0:e.length)>0?s.groupList.map((function(e){return e.id})):"--",orga:(null==s||null===(t=s.orgaList)||void 0===t?void 0:t.length)>0?s.orgaList.map((function(e){return e.orgaId})):"--"}))):W({pageParam:{pageSize:10,currentPage:N},bgroup:y}));return function(){z([])}}),[b]);var W=function(e){S(e).then((function(t){if(0===t.code){var r=C.concat(t.data.dataList);z(r),M(e.pageParam.currentPage)}}))},F=function(){var e=(0,f.default)(u.default.mark((function e(t){var r,n,l,i;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.role,t.group,t.orga,n=(0,c.default)(t,v),l=O(O({},n),{},{type:0,dirId:"1"}),!a){e.next=9;break}return l=O(O({},n),{},{id:s.id,type:s.type,dirId:s.dirId}),e.next=6,I(l);case 6:i=e.sent,e.next=12;break;case 9:return e.next=11,D(l);case 11:i=e.sent;case 12:0===i.code?a?(E(),w()):B(r,i.data):d.default.error(i.msg);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(e,t){if(Array.isArray(e)){var r=e.map((function(e){return x({user:{id:t},role:{id:e}})}));Promise.all(r).then((function(e){E(),w()}))}else{x({user:{id:t},role:{id:e}}).then((function(e){0===e.code&&(E(),w())}))}},G=function(e,t){var r=_.getFieldValue,a=_.setFieldsValue,n=r("phone"),u=r("email"),l=r("name");if(t)switch(e.field){case"name":a({phone:n}),a({email:u});break;case"phone":a({name:l}),a({email:u});break;default:a({name:l}),a({phone:n})}else switch(e.field){case"name":if(!n&&!u)return Promise.reject("用户名、邮箱、手机号不能同时为空");break;case"phone":if(!l&&!u)return Promise.reject("用户名、邮箱、手机号不能同时为空");break;default:if(!l&&!n)return Promise.reject("用户名、邮箱、手机号不能同时为空")}return Promise.resolve()};return m.default.createElement(i.default,{form:_,onFinish:F,layout:"vertical"},m.default.createElement(i.default.Item,{label:U("adduser-module.nickname"),name:"nickname",rules:[{required:!0,message:U("adduser-module.nicknameRequired")}]},m.default.createElement(o.default,{id:"user-add-nickname",disabled:s.dirId&&"1"!==s.dirId||!1})),m.default.createElement(i.default.Item,{label:U("adduser-module.name"),name:"name",rules:a&&"1"!==s.dirId?[{validator:G}]:[{pattern:/^[\u4e00-\u9fa5a-zA-Z0-9_-]{0,16}$/,message:"用户名最长16位(字母，数字，下划线，减号，汉字)"},{validator:G}]},m.default.createElement(o.default,{disabled:s.dirId&&"1"!==s.dirId||!1})),m.default.createElement(i.default.Item,{label:U("adduser-module.phone"),name:"phone",rules:[{pattern:/^(?:(?:\+|00)86)?1[3-9]\d{9}$/,message:"手机号码不正确"},{validator:G}]},m.default.createElement(o.default,{disabled:s.dirId&&"1"!==s.dirId||!1})),m.default.createElement(i.default.Item,{label:U("adduser-module.email"),name:"email",rules:[{type:"email",message:U("adduser-module.emailFormat")},{validator:G}]},m.default.createElement(o.default,{disabled:s.dirId&&"1"!==s.dirId||!1})),!a&&m.default.createElement(i.default.Item,{label:U("adduser-module.password"),name:"password",rules:(!a||"1"===s.dirId)&&[{required:!0,message:U("adduser-module.passwordRequired")}]},m.default.createElement(o.default,{disabled:s.dirId&&"1"!==s.dirId||!1})),m.default.createElement(i.default.Item,{label:U("adduser-module.userType"),name:"dirId",initialValue:"1",rules:[{required:!0,message:U("adduser-module.userTypeRequired")}]},m.default.createElement(l.default,{disabled:!0},j.map((function(e){return m.default.createElement(l.default.Option,{key:e.id,value:e.id},e.name)})))),a&&m.default.createElement(m.default.Fragment,null,m.default.createElement(i.default.Item,{label:"部门",name:"orga"},(null==s||null===(t=s.orgaList)||void 0===t?void 0:t.length)>0?m.default.createElement(l.default,{mode:"multiple",disabled:!0},(null==s?void 0:s.orgaList)&&s.orgaList.map((function(e){return m.default.createElement(l.default.Option,{key:e.orgaId,value:e.orgaId},e.orgaName)}))):m.default.createElement(o.default,{value:"--",disabled:!0})),m.default.createElement(i.default.Item,{label:"用户组",name:"group"},(null==s||null===(r=s.groupList)||void 0===r?void 0:r.length)>0?m.default.createElement(l.default,{mode:"multiple",disabled:!0},(null==s?void 0:s.groupList)&&s.groupList.map((function(e){return m.default.createElement(l.default.Option,{key:e.id,value:e.id},e.name)}))):m.default.createElement(o.default,{disabled:!0}))),m.default.createElement(i.default.Item,{label:"角色",name:"role",rules:[{required:!0,message:U("adduser-module.userTypeRequired")}]},m.default.createElement(l.default,{mode:"multiple",onPopupScroll:function(e){e.persist();var t=e.target;t.scrollTop+t.offsetHeight===t.scrollHeight&&(N<k.total&&W({pageParam:{pageSize:10,currentPage:N+1}}))},disabled:a},C.map((function(e){if(2!==e.businessType||a)return m.default.createElement(l.default.Option,{key:e.id,value:e.id},e.name)})))))}},941:function(e,t,r){"use strict";var a=r(26);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(942));t.default=n.default},942:function(e,t,r){"use strict";var a=r(26),n=r(149);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(426);var u=a(r(427));r(436);var l=a(r(434)),i=a(r(943));r(424);var o=a(r(425));r(797);var d=a(r(792));r(405);var c=a(r(406));r(630);var f=a(r(629)),s=a(r(57)),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=y(t);if(r&&r.has(e))return r.get(e);var a={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=u?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(a,l,i):a[l]=e[l]}return a.default=e,r&&r.set(e,a),a}(r(0)),m=r(86),g=r(18),v=r(799),b=a(r(842));function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(y=function(e){return e?r:t})(e)}r(957);var O=[{id:2,name:"LDAP",desc:"同步LDAP用户以及组织架构",icon:r(958)},{id:4,name:"企业微信",desc:"同步企业微信用户以及组织架构",icon:r(959)}];t.default=function(){var e=localStorage.getItem(g.LOCALSTORAGE_KEY.AUTH_CONFIG);if(e){var t=JSON.parse(e);if(!t.authType&&-1===t.appName.indexOf("eas"))return p.default.createElement(b.default,{module:"用户目录",link:"/dir"})}var r=(0,p.useState)([]),a=(0,s.default)(r,2),n=a[0],y=a[1],h=(0,m.useHasPointPlugin)("directory"),w=(0,g.getVersionInfo)();(0,p.useEffect)((function(){return E(),function(){return y([])}}),[]);var E=function(){var e={ids:["1"]};try{0}catch(t){e={ids:["1"]}}g.Axios.post("/user/userdir/findDirByIds",e).then((function(e){if(!e.code){var t=e.data;y(t)}}))};return p.default.createElement(o.default,{className:"directory"},p.default.createElement(u.default,{xs:{span:"24"},sm:{span:"24"},md:{span:"24"},lg:{span:"24"},xl:{span:"18",offset:"3"},xxl:{span:"18",offset:"3"},className:"directory-wrap"},p.default.createElement(v.BreadCrumb,{firstItem:"用户目录"}),p.default.createElement("div",{className:"directory_content"},n.map((function(e){return p.default.createElement(o.default,{justify:"space-between",align:"middle",key:e.id,style:{padding:16}},p.default.createElement("div",{className:"directory_content_item"},p.default.createElement(f.default,{size:64}),p.default.createElement("div",{className:"directory_content_item_title"},p.default.createElement(c.default,{direction:"vertical"},p.default.createElement("div",null,e.name),p.default.createElement("p",{className:"directory_content_desc"},"这是一个描述内容")))),p.default.createElement(c.default,null,p.default.createElement(d.default,{disabled:!0},"同步数据"),p.default.createElement(d.default,{disabled:!0},"开启"),p.default.createElement(d.default,{disabled:!0},"禁止"),p.default.createElement(d.default,{disabled:!0},"配置")))})),"{}"!==JSON.stringify(w)&&!w.expired&&h?p.default.createElement(m.RemoteComponent,{point:"directory",isModalType:!0}):p.default.createElement(p.default.Fragment,null,O.map((function(e){return p.default.createElement(o.default,{justify:"space-between",align:"middle",key:e.id,style:{padding:16}},p.default.createElement("div",{className:"directory_content_item"},p.default.createElement(f.default,{size:64,src:e.icon.default}),p.default.createElement("div",{className:"directory_content_item_title"},p.default.createElement(c.default,{direction:"vertical"},p.default.createElement(c.default,null,p.default.createElement("div",null,e.name),p.default.createElement(l.default,{placement:"topRight",title:"增强功能需要去官网购买Licence"},p.default.createElement(i.default,{style:{fontSize:"var(--thoughtware-icon-size-16)"}}))),p.default.createElement("p",{className:"directory_content_desc"},e.desc)))),p.default.createElement(c.default,null,p.default.createElement(d.default,{disabled:!0},"同步数据"),p.default.createElement(d.default,{disabled:!0},"开启"),p.default.createElement(d.default,{disabled:!0},"禁止"),p.default.createElement(d.default,{disabled:!0},"配置")))}))))))}},944:function(e,t,r){"use strict";var a=r(26);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(470);var n=a(r(469)),u=a(r(435)),l=a(r(95)),i=a(r(0)),o=a(r(898));r(946);var d=["children","footer"];t.default=function(e){var t=e.children,r=e.footer,a=(0,l.default)(e,d),c=i.default.createElement(i.default.Fragment,null,i.default.createElement(o.default,{onClick:a.onCancel,title:"取消",isMar:!0}),i.default.createElement(o.default,{onClick:a.onOk,title:"确定",type:"primary"}));return i.default.createElement(n.default,(0,u.default)({style:{maxWidth:"calc(100vw - 120px)",maxHeight:"calc(100vh - 120px)",marginRight:"auto",marginLeft:"auto",position:"absolute",top:60,right:0,left:0,height:"100%",display:"flex",flexDirection:"column"},wrapClassName:"thoughtware_user_modal",closable:!1,footer:r||c},a),t)}},945:function(e,t,r){"use strict";r.r(t)},946:function(e,t,r){"use strict";r.r(t)},947:function(e,t,r){"use strict";var a=r(26);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(405);var n=a(r(406)),u=a(r(571)),l=a(r(0));r(948);t.default=function(e){var t=e.firstItem,r=e.secondItem,a=e.onClick,i=e.children;return l.default.createElement("div",{className:"user-breadcrumb"},l.default.createElement(n.default,null,l.default.createElement("span",{className:a?"user-breadcrumb-first":"",onClick:a},a&&l.default.createElement(u.default,{style:{marginRight:8}}),l.default.createElement("span",{className:r?"user-breadcrumb-span":""},t)),r&&l.default.createElement("span",null," /   ",r)),l.default.createElement("div",null,i))}},948:function(e,t,r){"use strict";r.r(t)},949:function(e,t,r){"use strict";var a=r(26);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(782));r(630);var u=a(r(629)),l=a(r(0)),i=r(18);r(950);t.default=function(e){var t=e.userInfo,r=void 0===t?void 0:t,a=r||(0,i.getUser)();return l.default.createElement("div",{className:"thoughtware-profile"},a.avatar&&"null"!==a.avatar?l.default.createElement(u.default,{src:a.avatar}):a.nickname&&"null"!==a.nickname?l.default.createElement(u.default,null,a.nickname.substring(0,1)):a.name&&"null"!==a.name?l.default.createElement(u.default,null,a.name.substring(0,1)):l.default.createElement(u.default,{size:32,icon:l.default.createElement(n.default,null)}))}},950:function(e,t,r){"use strict";r.r(t)},951:function(e,t,r){"use strict";var a=r(26);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(778)),u=a(r(571)),l=a(r(0));r(952);t.default=function(e){var t=e.currentPage,r=e.changPage,a=e.page,i=a.totalPage,o=void 0===i?1:i,d=a.totalRecord,c=void 0===d?1:d;return o>1&&l.default.createElement("div",{className:"user-page"},l.default.createElement("div",{className:"".concat(1===t?"user-page-ban":"user-page-allow"),onClick:function(){return 1===t?null:r(t-1)}},l.default.createElement(u.default,null)),l.default.createElement("div",{className:"user-page-current"},t),l.default.createElement("div",{className:"user-page-line"}," / "),l.default.createElement("div",null,o),l.default.createElement("div",{className:"".concat(t===o?"user-page-ban":"user-page-allow"),onClick:function(){return t===o?null:r(t+1)}},l.default.createElement(n.default,null)),l.default.createElement("div",{className:"user-page-record"},"  共",c,"条 "))}},952:function(e,t,r){"use strict";r.r(t)},953:function(e,t,r){"use strict";var a=r(26);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ListAction",{enumerable:!0,get:function(){return n.default}});var n=a(r(954))},954:function(e,t,r){"use strict";var a=r(26);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(550);var n=a(r(549)),u=a(r(769));r(470);var l=a(r(469));r(436);var i=a(r(434)),o=a(r(467)),d=a(r(0));r(955);t.default=function(e){var t=e.edit,r=e.del;return d.default.createElement("span",{className:"user-listAction"},t&&d.default.createElement(i.default,{title:"修改"},d.default.createElement("span",{onClick:t,className:"edit",style:{cursor:"pointer",marginRight:15}},d.default.createElement(o.default,{style:{fontSize:16}}))),r&&d.default.createElement(n.default,{overlay:d.default.createElement("div",{className:"user-dropdown-more"},d.default.createElement("div",{className:"dropdown-more-item",onClick:function(){l.default.confirm({title:"确定删除吗？",content:d.default.createElement("span",{style:{color:"#f81111"}},"删除后无法恢复！"),okText:"确认",cancelText:"取消",onOk:function(){r()},onCancel:function(){}})}},"删除")),trigger:["click"],placement:"bottomRight"},d.default.createElement(i.default,{title:"更多"},d.default.createElement("span",{className:"del",style:{cursor:"pointer"}},d.default.createElement(u.default,{style:{fontSize:17}})))))}},955:function(e,t,r){"use strict";r.r(t)},956:function(e,t,r){"use strict";r.r(t)},957:function(e,t,r){"use strict";r.r(t)},958:function(e,t,r){"use strict";r.r(t),t.default=r.p+"images/ldap.jpeg"},959:function(e,t,r){"use strict";r.r(t),t.default=r.p+"images/qywechat.jpeg"},960:function(e,t,r){"use strict";var a=r(26);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(961));t.default=n.default},961:function(e,t,r){"use strict";var a=r(26),n=r(149);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=a(r(19));r(424);var l=a(r(425));r(776);var i=a(r(774)),o=a(r(435));r(426);var d=a(r(427));r(409);var c=a(r(408));r(403);var f=a(r(402)),s=a(r(453)),p=a(r(433)),m=a(r(48)),g=a(r(21));r(436);var v=a(r(434)),b=a(r(1021));r(405);var y=a(r(406));r(449);var O=a(r(448)),h=a(r(57)),w=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=x(t);if(r&&r.has(e))return r.get(e);var a={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=u?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(a,l,i):a[l]=e[l]}return a.default=e,r&&r.set(e,a),a}(r(0)),E=r(65),P=r(94),j=r(799),_=a(r(962));r(964);var k=r(5);function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(x=function(e){return e?r:t})(e)}function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){(0,g.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.default=(0,E.inject)("domainUserStore","userStore")((0,E.observer)((function(e){var t=e.domainId,r=e.domainType,a=void 0===r?null:r,n=e.domainUserStore,g=e.userStore,E=e.bgroup,x=n.getDomainUser,D=n.privilegeDomainUsers,I=n.createDmRoleUserAction,U=n.deleteDmRoleUserAction,A=n.deleteDmUserAction,R=n.findDmRoleListAction,N=n.findDmRoleUserListByRole,M=n.findDmUserPageAction,L=g.createRoleUserAction,T=g.findUserOrgaList,C=g.findUserDirList,z=(0,P.useTranslation)().t,W=O.default.useForm(),F=(0,h.default)(W,1)[0],B=(0,w.useState)([]),G=(0,h.default)(B,2),q=G[0],K=G[1],V=(0,w.useState)({}),J=(0,h.default)(V,2),H=J[0],Y=J[1],Q=(0,w.useState)(!1),$=(0,h.default)(Q,2),Z=$[0],X=$[1],ee=(0,w.useState)([]),te=(0,h.default)(ee,2),re=te[0],ae=te[1],ne=(0,w.useState)(!1),ue=(0,h.default)(ne,2),le=ue[0],ie=ue[1],oe=(0,w.useState)({pageSize:13,currentPage:1}),de=(0,h.default)(oe,1)[0],ce=(0,w.useState)({}),fe=(0,h.default)(ce,2),se=fe[0],pe=fe[1],me=(0,w.useState)({pageParam:de}),ge=(0,h.default)(me,2),ve=ge[0],be=ge[1],ye=[{title:z("orga-table.nickname"),dataIndex:["user","nickname"],key:"nickname",width:"20%",ellipsis:!0,render:function(e,t){return w.default.createElement(y.default,null,w.default.createElement(j.Profile,{userInfo:null==t?void 0:t.user}),e)}},{title:z("orga-table.name"),dataIndex:["user","name"],key:"name",width:"15%",ellipsis:!0},{title:z("orga-table.org"),dataIndex:["user","org"],key:"org",width:"20%",ellipsis:!0,render:function(e,t){var r=t.orgaList;return(null==r?void 0:r.length)>0?w.default.createElement("span",null,r[0].orgaName,r.length>1&&w.default.createElement(w.default.Fragment,null,"(+",r.length-1,")")):"--"}},{title:"角色",dataIndex:"role",key:"role",width:"20%",ellipsis:!0,render:function(e,t){var r,a=t.roleList;return(null==a?void 0:a.length)>0?w.default.createElement("span",null,null===(r=a[0])||void 0===r||null===(r=r.dmRole)||void 0===r||null===(r=r.role)||void 0===r?void 0:r.name,a.length>1&&w.default.createElement(w.default.Fragment,null,"(+",a.length-1,")")):"--"}},{title:z("orga-table.type"),dataIndex:["user","dirId"],key:"dirId",width:"15%",ellipsis:!0,render:function(e){var t=re.findIndex((function(t){return t.id===e}));return t>-1?re[t].name:"--"}},{title:z("orga-common.action"),key:"action",width:"10%",ellipsis:!0,render:function(e,t){var r,a=t.roleList;return!(a&&2===(null===(r=a[0])||void 0===r||null===(r=r.dmRole)||void 0===r||null===(r=r.role)||void 0===r?void 0:r.businessType))&&w.default.createElement(y.default,{size:"middle"},w.default.createElement(v.default,{title:"角色修改"},w.default.createElement(b.default,{style:{fontSize:16},onClick:function(){return Pe(t)}})),w.default.createElement(j.ListAction,{del:function(){return je(t.id)}}))}}];(0,w.useEffect)((function(){if(Z&&H){var e=H.roleList;F.setFieldsValue({role:null==e?void 0:e.map((function(e){return e.dmRole.id}))})}}),[Z]),(0,w.useEffect)((function(){Oe(),Ee()}),[]),(0,w.useEffect)((function(){he()}),[ve]);var Oe=function(){C().then((function(e){e.code||ae(e.data)}))},he=function(){M(S({domainId:t},ve)).then(function(){var e=(0,m.default)(u.default.mark((function e(t){var r;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code){e.next=6;break}return pe({totalRecord:t.data.totalRecord,totalPage:t.data.totalPage}),e.next=4,Promise.all(we(t.data.dataList));case 4:r=e.sent,x(r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},we=function(e){return e.map(function(){var e=(0,m.default)(u.default.mark((function e(r){var a,n,l,i;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,N({domainId:t,userId:r.user.id});case 3:return 0===(l=e.sent).code&&l.data&&(a=l.data.map((function(e){return{dmRole:S(S({},e.dmRole),{},{role:e.role}),roleUserId:e.id}}))),e.next=7,T({userId:r.user.id,scope:1,type:1});case 7:return 0===(i=e.sent).code&&i.data&&(n=i.data.slice(-1).map((function(e){return S(S({},e.orga),{},{orgaUserId:e.id})}))),e.abrupt("return",S(S({},r),{},{roleList:a,orgaList:n}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},Ee=function(){R({domainId:t}).then((function(e){e.code||K(e.data)}))},Pe=function(e){Y(e),X(!0)},je=function(e){A(e).then((function(e){e.code||be({pageParam:de})}))},_e=function(){F.resetFields(),X(!1)},ke=function(e){var t=e.map((function(e){return U(e)}));return Promise.all(t)},xe=function(e,r){var a={bgroup:E,userId:r,domainId:t};if(Array.isArray(e)){var n=e.map((function(e){var t=S(S({},a),{},{dmRole:{id:e}});return I(t)}));Promise.all(n).then((function(e){_e()}))}else a=S(S({},a),{},{dmRole:{id:e}}),L(a).then((function(e){0===e.code&&_e()}))};return w.default.createElement(l.default,{className:"privilege-domain-user"},w.default.createElement(d.default,{xs:{span:"24"},sm:{span:"24"},md:{span:"24"},lg:{span:"24"},xl:{span:"20",offset:"2"},xxl:{span:"18",offset:"3"},className:"privilege-domain-user-content"},w.default.createElement(j.BreadCrumb,{firstItem:"成员"},w.default.createElement(j.Btn,{onClick:function(){return ie(!0)},icon:w.default.createElement(p.default,null),type:"primary",title:z("orga-label.addUser")})),w.default.createElement("div",{style:{paddingBottom:"var(--thoughtware-padding-item)"}},w.default.createElement(f.default,{placeholder:z("orga-label.searchUserPhoneEmail"),onPressEnter:function(e){return function(e){var t=S(S({},ve),{},{pageParam:de});e.target.value?t.nickname=e.target.value:delete t.nickname,be(t)}(e)},prefix:w.default.createElement(s.default,{style:{fontSize:"var(--thoughtware-icon-size-16)"}}),style:{width:"240px"}})),w.default.createElement(c.default,{columns:ye,dataSource:D,rowKey:function(e){return e.id},tableLayout:"fixed",pagination:!1}),w.default.createElement(j.Page,{currentPage:ve.pageParam.currentPage,changPage:function(e){var t=S(S({},ve),{},{pageParam:{pageSize:13,currentPage:e}});be(t)},page:se})),w.default.createElement(_.default,(0,o.default)({},e,{userDir:re,domainId:t,domainType:a,visible:le,setVisible:ie,getDomainUsers:he})),w.default.createElement(j.BaseModal,{title:"修改角色",visible:Z,onCancel:_e,onOk:function(){F.submit()},destroyOnClose:!0},w.default.createElement(O.default,{form:F,onFinish:function(e){var t=(0,k.toJS)(H),r=t.user.id,a=(t.roleList||[]).map((function(e){return e.dmRole.id})),n=e.role,u=a.filter((function(e){return!n.includes(e)})),l=(t.roleList||[]).map((function(e){if(u.includes(e.dmRole.id))return e.roleUserId})).filter(Boolean);0===l.length?xe(n,r):ke(l).then((function(){xe(n,r)})),he()},preserve:!1,layout:"vertical"},w.default.createElement(O.default.Item,{label:"角色",name:"role",rules:[{required:!0,message:z("adduser-module.userTypeRequired")}]},w.default.createElement(i.default,{mode:"multiple"},q.map((function(e){if(2!==e.role.businessType)return w.default.createElement(i.default.Option,{key:e.id,value:e.id},e.role.name)})))))))})))},962:function(e,t,r){"use strict";var a=r(26),n=r(149);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=a(r(57)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var a={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=u?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(a,l,i):a[l]=e[l]}return a.default=e,r&&r.set(e,a),a}(r(0)),i=a(r(853));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var d=function(e){var t=e.visible,r=e.setVisible,a=e.getDomainUsers,n=e.userDir,o=e.domainId,d=e.domainType,c=e.domainUserStore,f=c.createDmUserAction,s=c.findDmUserListAction,p=c.createDefaultRole,m=(0,l.useState)([]),g=(0,u.default)(m,2),v=g[0],b=g[1],y=(0,l.useState)([]),O=(0,u.default)(y,2),h=O[0],w=O[1];(0,l.useEffect)((function(){t&&s({domainId:o}).then((function(e){0===e.code&&(w(e.data.map((function(e){return e.user.id}))),b(e.data.map((function(e){return e.user.id}))))}))}),[t]);var E=function(){b([]),r(!1)};return l.default.createElement(i.default,{visible:t,userDir:n,allSelectIds:h,selectedRowKeys:v,setSelectedRowKeys:b,handleOk:function(){var e=v.filter((function(e){return!h.includes(e)})).map((function(e){return f(t={domainId:o,domainType:d,user:{id:e}}),void p(t);var t}));Promise.all(e).then((function(e){setTimeout((function(){E(),a()}),200)}))},handleCancel:E})},c=function(e,t){return e.visible===t.visible};t.default=(0,l.memo)(d,c)},963:function(e,t,r){"use strict";r.r(t)},964:function(e,t,r){"use strict";r.r(t)},965:function(e,t,r){"use strict";var a=r(26);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(966));t.default=n.default},966:function(e,t,r){"use strict";var a=r(26),n=r(149);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(424);var u=a(r(425));r(426);var l=a(r(427));r(791);var i=a(r(52)),o=a(r(21)),d=a(r(57)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=y(t);if(r&&r.has(e))return r.get(e);var a={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=u?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(a,l,i):a[l]=e[l]}return a.default=e,r&&r.set(e,a),a}(r(0)),f=r(65),s=r(18),p=a(r(967)),m=a(r(970)),g=a(r(842)),v=r(799),b=r(124);function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(y=function(e){return e?r:t})(e)}function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}r(972);t.default=(0,f.inject)(b.ORG_STORE)((0,f.observer)((function(e){var t=e.orgStore,r=t.selectData,a=t.selectTreeOrgDetail,n=t.findOrgaAction,f=t.findOrgaTreeAction,b=t.findUserOrgaPageAction,y=t.findOpenUserDirListAction,h=localStorage.getItem(s.LOCALSTORAGE_KEY.AUTH_CONFIG);if(h){var w=JSON.parse(h);if(!w.authType&&-1===w.appName.indexOf("eas"))return c.default.createElement(g.default,{module:"部门",link:"/orga"})}var E=(0,c.useState)(""),P=(0,d.default)(E,2),j=P[0],_=P[1],k=(0,c.useState)(null),x=(0,d.default)(k,2),D=x[0],S=x[1],I=(0,c.useState)(10),U=(0,d.default)(I,1)[0],A=(0,c.useState)(1),R=(0,d.default)(A,2),N=R[0],M=R[1],L=(0,c.useState)({}),T=(0,d.default)(L,2),C=T[0],z=T[1],W=(0,c.useState)([]),F=(0,d.default)(W,2),B=F[0],G=F[1],q=(0,c.useState)({}),K=(0,d.default)(q,2),V=K[0],J=K[1],H=(0,c.useState)([]),Y=(0,d.default)(H,2),Q=Y[0],$=Y[1],Z=(0,c.useState)([]),X=(0,d.default)(Z,2),ee=X[0],te=X[1];(0,c.useEffect)((function(){y().then((function(e){e.code||te(e.data)}))}),[]),(0,c.useEffect)((function(){re()}),[V]);var re=function(){f(V).then((function(e){if(!e.code)if($(e.data&&e.data),e.data.length){var t=e.data[0];ne({orgaId:t.orgaId}),_(t.orgaId)}else a(null),_("")}))},ae=function(e,t,r){var a=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({pageParam:{currentPage:t,pageSize:U}},e);b(a).then((function(e){e.code||(z({totalPage:e.data.totalPage,totalRecord:e.data.totalRecord}),G(e.data.dataList))}))},ne=function(e){e.parentOrga?S(e.parentOrga.orgaId):S(null),n(e.orgaId).then((function(t){t.code||(_(e.orgaId),M(1),a({orgName:t.data.orgaName,parentOrg:t.data.parentOrga?t.data.parentOrga.orgaName:null,userDirType:t.data.dirId}),ae({orgaId:e.orgaId},1))})).catch((function(e){}))};return c.default.createElement("div",{className:"orga_container"},c.default.createElement("div",{className:"orga_container_body"},c.default.createElement(p.default,{treeData:Q,treeParams:V,setTreeParams:J,orgStore:t,userDir:ee,selectData:r,getAllTree:re,onSelect:ne}),c.default.createElement(u.default,{className:"orga_table"},c.default.createElement(l.default,{xs:{span:"24"},sm:{span:"24"},md:{span:"24"},lg:{span:"24"},xl:{span:"24"},xxl:{span:"20",offset:"2"},className:"orga_table_right"},c.default.createElement(v.BreadCrumb,{firstItem:(null==r?void 0:r.orgName)||"部门"}),r?c.default.createElement(m.default,{page:C,orgId:j,data:r,tableData:B,currentPage:N,parentOrgaId:D,getOrgaUser:ae,restTableData:function(e){M(e),ae({orgaId:j},e)},userDir:ee}):c.default.createElement(i.default,{description:c.default.createElement("span",null,"组织树结构为空，你需要创建一个")})))))})))},967:function(e,t,r){"use strict";var a=r(26),n=r(149);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(772);var u=a(r(771));r(403);var l=a(r(402)),i=a(r(453));r(776);var o=a(r(774)),d=a(r(1022));r(405);var c=a(r(406));r(550);var f=a(r(549)),s=a(r(769));r(436);var p=a(r(434)),m=a(r(433));r(568);var g=a(r(567)),v=a(r(21));r(473);var b=a(r(98)),y=a(r(57)),O=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=j(t);if(r&&r.has(e))return r.get(e);var a={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=u?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(a,l,i):a[l]=e[l]}return a.default=e,r&&r.set(e,a),a}(r(0)),h=r(5),w=r(94),E=r(578),P=a(r(968));function j(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(j=function(e){return e?r:t})(e)}function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){(0,v.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r(969);t.default=function(e){e.selectData;var t,r,a=e.treeData,n=e.onSelect,v=e.orgStore,j=e.getAllTree,_=e.setTreeParams,x=e.userDir,D=e.treeParams,S=v.deleteOrgaAction,I=v.findOrgaAction,U=v.updateOrgaSortAction,A=(0,w.useTranslation)().t,R=(0,O.useState)(!1),N=(0,y.default)(R,2),M=N[0],L=N[1],T=(0,O.useState)({}),C=(0,y.default)(T,2),z=C[0],W=C[1],F=(0,O.useState)(!1),B=(0,y.default)(F,2),G=B[0],q=B[1],K=function(e){return O.default.createElement("div",{className:"orga-tree-actions-menu"},O.default.createElement(E.PrivilegeButton,{code:"orga_update_orga"},O.default.createElement("div",{className:"orga-tree-actions-item",onClick:function(t){return function(e,t){e.stopPropagation(),I(t.orgaId).then((function(e){e.code||(W(e.data),q(!0),L(!0))}))}(t,e)}},"编辑组织")),"111111"!==e.orgaId&&O.default.createElement(E.PrivilegeButton,{code:"orga_delete_orga"},O.default.createElement(g.default,{placement:"topRight",title:"你确定删除吗",onConfirm:function(t){return function(e,t){if(e.stopPropagation(),t.children.length>0)return b.default.error("组织中存在部门,不能删除");S(t.orgaId).then((function(e){e.code||j()}))}(t,e)},okText:"确定",cancelText:"取消"},O.default.createElement("div",{className:"orga-tree-actions-item",onClick:function(e){return e.stopPropagation()}},"删除组织"))))},V=function(e){return O.default.createElement("div",{className:"thoughtware_tree_actions"},O.default.createElement(c.default,null,O.default.createElement(E.PrivilegeButton,{code:"orga_add_orga"},O.default.createElement(p.default,{title:"添加部门"},O.default.createElement(m.default,{onClick:function(t){return function(e,t){e.stopPropagation(),W(t),L(!0)}(t,e)},style:{fontSize:"var(--thoughtware-icon-size-16)"}}))),O.default.createElement(f.default,{overlay:K(e),trigger:["click","hover"]},O.default.createElement(s.default,{style:{fontSize:"var(--thoughtware-icon-size-16)",padding:4},onClick:function(e){return e.stopPropagation()}}))))},J=function(e){return O.default.createElement("span",{className:"orga-tree_item_action"},"111111"===e.orgaId?O.default.createElement(c.default,null,O.default.createElement(d.default,{style:{fontSize:"var(--thoughtware-icon-size-16)"}}),e.orgaName):e.orgaName,"1"===e.dirId&&V(e))};return O.default.createElement("div",{className:"orga-tree-wrap"},O.default.createElement(l.default.Group,{compact:!0},O.default.createElement(o.default,{placeholder:"目录类型",style:{width:"40%"},onSelect:function(e){-1===e?D.orgaName?_({orgaName:D.orgaName}):_({}):_(k(k({},D),{},{dirId:e}))}},O.default.createElement(o.default.Option,{key:"-1",value:-1},A("orga-table.all")),x.map((function(e){return O.default.createElement(o.default.Option,{key:e.id,value:e.id},e.name)}))),O.default.createElement(l.default,{placeholder:A("orga-common.search")+A("orga-common.orga")+A("orga-common.name"),style:{width:"60%"},onPressEnter:function(e){return function(e){var t=e.target.value;_(k(k({},D),{},{orgaName:t}))}(e)},prefix:O.default.createElement(i.default,{style:{fontSize:"var(--thoughtware-icon-size-16)"}})})),O.default.createElement("div",{className:"orga-tree-wrap-tree"},O.default.createElement("div",{className:"orga-tree-content"},(null==a?void 0:a.length)>0?O.default.createElement(u.default.DirectoryTree,{className:"draggable-tree",draggable:!0,blockNode:!0,multiple:!0,showIcon:!1,onDrop:function(e){var t=e.node.props.eventKey,r=e.dragNode.props.eventKey,a=e.node.parentOrga.orgaId,n=e.dragNode.parentOrga.orgaId,u=e.node.sort,l=e.dragNode.sort;if(a!==n)return b.default.error("仅允许同层级部门排序");var i={list:[{parentOrga:e.node.parentOrga,orgaName:e.node.orgaName,orgaId:t,sort:l,dirId:e.node.dirId},{parentOrga:e.dragNode.parentOrga,orgaName:e.dragNode.orgaName,orgaId:r,sort:u,dirId:e.dragNode.dirId}]};U(i).then((function(e){j()}))},defaultExpandedKeys:["111111"],defaultSelectedKeys:["111111"],treeData:(t=(0,h.toJS)(a),r=[],function e(t,r){t.forEach((function(t,a){var n={key:t.orgaId,orgaName:t.orgaName,title:J(t),sort:t.sort,dirId:t.dirId,parentOrga:t.parentOrga,children:[]};r.push(n),t.children&&t.children.length>0&&e(t.children,r[a].children)}))}(t,r),r),onSelect:function(e,t){var r=t.node,a={orgaName:r.orgaName,parentOrga:r.parentOrga,sort:r.sort,orgaId:r.key,dirId:r.dirId,path:r.path};n(a)},defaultExpandParent:!0}):O.default.createElement(O.default.Fragment,null))),O.default.createElement(P.default,{visible:M,cancelAddOrg:function(){L(!1),W({}),q(!1)},editData:z,isEdit:G,getAllTree:j,userDir:x}))}},968:function(e,t,r){"use strict";var a=r(26),n=r(149);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(776);var u=a(r(774));r(783);var l=a(r(779));r(403);var i=a(r(402)),o=a(r(21));r(449);var d=a(r(448)),c=a(r(57)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=b(t);if(r&&r.has(e))return r.get(e);var a={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=u?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(a,l,i):a[l]=e[l]}return a.default=e,r&&r.set(e,a),a}(r(0)),s=r(5),p=r(65),m=r(18),g=r(94),v=r(799);function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(b=function(e){return e?r:t})(e)}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.default=(0,p.inject)("orgStore")((0,p.observer)((function(e){var t=e.visible,r=e.cancelAddOrg,a=e.editData,n=void 0===a?{}:a,o=e.isEdit,p=void 0!==o&&o,b=e.getAllTree,y=e.userDir,h=void 0===y?[]:y,w=e.orgStore.findOrgaTreeAction,E=d.default.useForm(),P=(0,c.default)(E,1)[0],j=(0,g.useTranslation)().t,_=(0,f.useState)(null),k=(0,c.default)(_,2),x=k[0],D=k[1],S=(0,f.useState)([]),I=(0,c.default)(S,2),U=I[0],A=I[1];(0,f.useEffect)((function(){n&&(p?(P.setFieldsValue({parentOrga:n.parentOrga?n.parentOrga.orgaId:null,orgaName:n.orgaName,dirId:n.dirId}),D(n.path)):(P.setFieldsValue({parentOrga:n.orgaId}),n.path?D("".concat(n.orgaId,",").concat(n.path)):D("".concat(n.orgaId))))}),[n,p]),(0,f.useEffect)((function(){t&&w({dirId:"1"}).then((function(e){e.code||A(e.data)}))}),[t]);var R;return f.default.createElement(v.BaseModal,{title:p?j("orga-common.edit")+j("orga-common.orga"):j("orga-common.add")+j("orga-common.orga"),visible:t,onCancel:function(){P.resetFields(),r()},onOk:function(){P.submit()},destroyOnClose:!0,preserve:!1,forceRender:!0},f.default.createElement(d.default,{form:P,onFinish:function(e){var t="/user/orga/createOrga",a={orgaName:e.orgaName,parentOrga:{orgaId:e.parentOrga},dirId:e.dirId,path:x};p&&(t="/user/orga/updateOrga",a=O(O({},a),{},{orgaId:n.orgaId})),m.Axios.post(t,a).then((function(e){e.code||(b(),P.resetFields(),r())}))},layout:"vertical"},f.default.createElement(d.default.Item,{label:j("orga-label.orgaName"),name:"orgaName",rules:[{required:!0,message:"用户名不能包含非法字符，如&,%，&，#……等"}]},f.default.createElement(i.default,null)),f.default.createElement(d.default.Item,{label:j("orga-label.parentOrg"),name:"parentOrga"},f.default.createElement(l.default,{disabled:!0,style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:(R=[],function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.forEach((function(t){var u={};if(t.orgaId===n.orgaId){if(u={title:t.orgaName,value:t.orgaId,path:t.path,disabled:!0},r.push(u),t.children&&t.children.length>0)return e(t.children,u.children=[],u.disabled)}else u={title:t.orgaName,value:t.orgaId,path:t.path,disabled:a},r.push(u);if(t.children&&t.children.length>0)return e(t.children,u.children=[],a)}))}((0,s.toJS)(U.filter((function(e){return!e.parentOrga}))),R),R),placeholder:j("orga-label.parentOrgPlaceholder"),treeDefaultExpandedKeys:[U.length>0&&U[0].orgaId],onChange:function(e,t,r){var a=r.triggerNode.props.path;D(a?"".concat(a,",").concat(e):e)}})),f.default.createElement(d.default.Item,{label:j("orga-label.userType"),name:"dirId",initialValue:"1",rules:[{required:!0,message:j("orga-table.userTypeRequired")}]},f.default.createElement(u.default,{disabled:!0},h.map((function(e){return f.default.createElement(u.default.Option,{key:e.id,value:e.id},e.name)}))))))})))},969:function(e,t,r){"use strict";r.r(t)},970:function(e,t,r){"use strict";var a=r(26),n=r(149);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=a(r(435));r(409);var l=a(r(408)),i=a(r(433)),o=a(r(769));r(405);var d=a(r(406)),c=a(r(57)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=b(t);if(r&&r.has(e))return r.get(e);var a={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=u?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(a,l,i):a[l]=e[l]}return a.default=e,r&&r.set(e,a),a}(r(0)),s=r(65),p=r(94),m=r(578),g=r(799),v=a(r(971));function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(b=function(e){return e?r:t})(e)}t.default=(0,s.inject)("orgStore")((0,s.observer)((function(e){var t=e.data,r=e.tableData,a=e.page,n=e.orgId,s=e.parentOrgaId,b=e.getOrgaUser,y=e.currentPage,O=e.restTableData,h=e.userDir,w=e.orgStore.deleteUserOrgaAction,E=(0,f.useState)(!1),P=(0,c.default)(E,2),j=P[0],_=P[1],k=(0,p.useTranslation)().t,x=[{title:k("orga-table.nickname"),dataIndex:["user","nickname"],width:"25%",ellipsis:!0,render:function(e,t){return f.default.createElement(d.default,null,f.default.createElement(g.Profile,{userInfo:null==t?void 0:t.user}),e)}},{title:k("orga-table.name"),dataIndex:["user","name"],width:"25%",ellipsis:!0,render:function(e){return e||"--"}},{title:k("orga-table.phone"),dataIndex:["user","phone"],width:"20%",ellipsis:!0,render:function(e){return e||"--"}},{title:k("orga-table.email"),dataIndex:["user","email"],width:"20%",ellipsis:!0,render:function(e){return e||"--"}},{title:k("orga-common.action"),key:"action",width:"10%",ellipsis:!0,render:function(e,t){return f.default.createElement(m.PrivilegeButton,{code:"orga_delete_orga"},"1"===t.user.dirId||"0"===t.user.dirId?f.default.createElement(g.ListAction,{del:function(){return D(t.id)}}):f.default.createElement(o.default,{style:{color:"#999999",fontSize:"16px"}}))}}],D=function(e){w(e).then((function(e){e.code||O(1)}))};return f.default.createElement("div",{className:"org-detail"},f.default.createElement("div",{className:"org-detail-item"},f.default.createElement("label",null,k("orga-label.parentOrg"),"："),t.parentOrg||"无上级"),f.default.createElement("div",{className:"org-detail_title2_main"},f.default.createElement("span",{className:"org-detail_user_title2"},"用户(",a.totalRecord,")"),f.default.createElement(m.PrivilegeButton,{code:"orga_add_user"},f.default.createElement(g.Btn,{type:"1"!==t.userDirType?"disabled":"primary",onClick:"1"!==t.userDirType?null:function(){_(!0)},icon:f.default.createElement(i.default,null),title:k("orga-label.addUser")}))),f.default.createElement("div",{className:"org-detail-table"},f.default.createElement(l.default,{columns:x,dataSource:r,pagination:!1,rowKey:function(e){return e.id},tableLayout:"fixed"}),f.default.createElement(g.Page,{currentPage:y,changPage:O,page:a})),f.default.createElement(v.default,(0,u.default)({},e,{orgId:n,parentOrgaId:s,visible:j,onCancel:function(){return _(!1)},getOrgaUser:b,dirId:t.dirId,userDir:h})))})))},971:function(e,t,r){"use strict";var a=r(26),n=r(149);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=a(r(57)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var a={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=u?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(a,l,i):a[l]=e[l]}return a.default=e,r&&r.set(e,a),a}(r(0)),i=r(18),o=a(r(853));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}t.default=function(e){var t=e.visible,r=e.onCancel,a=e.orgId,n=e.userDir,d=e.getOrgaUser,c=(0,l.useState)([]),f=(0,u.default)(c,2),s=f[0],p=f[1],m=(0,l.useState)([]),g=(0,u.default)(m,2),v=g[0],b=g[1];(0,l.useEffect)((function(){t&&i.Axios.post("/user/userOrga/findUserOrgaList",{orgaId:a}).then((function(e){0===e.code&&(b(e.data.map((function(e){return e.user.id}))),p(e.data.map((function(e){return e.user.id}))))}))}),[t]);return l.default.createElement(o.default,{visible:t,userDir:n,allSelectIds:v,selectedRowKeys:s,setSelectedRowKeys:p,handleOk:function(){var e=s.filter((function(e){return!v.includes(e)})).map((function(e){return t={user:{id:e},orga:{orgaId:a}},i.Axios.post("/user/userOrga/createUserOrga",t);var t}));Promise.all(e).then((function(e){p([]),r(),d({orgaId:a},1)}))},handleCancel:function(){p([]),r()}})}},972:function(e,t,r){"use strict";r.r(t)},973:function(e,t,r){"use strict";var a=r(26);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(974));t.default=n.default},974:function(e,t,r){"use strict";var a=r(26),n=r(149);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=a(r(19));r(424);var l=a(r(425));r(426);var i=a(r(427)),o=a(r(435));r(409);var d=a(r(408));r(403);var c=a(r(402)),f=a(r(453)),s=a(r(433)),p=a(r(467));r(405);var m=a(r(406));r(550);var g=a(r(549));r(436);var v=a(r(434)),b=a(r(769)),y=a(r(975));r(470);var O=a(r(469)),h=a(r(21)),w=a(r(48)),E=a(r(57)),P=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=N(t);if(r&&r.has(e))return r.get(e);var a={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=u?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(a,l,i):a[l]=e[l]}return a.default=e,r&&r.set(e,a),a}(r(0)),j=r(65),_=r(5),k=r(18),x=r(94),D=r(578),S=r(799),I=a(r(976)),U=a(r(977)),A=a(r(978)),R=a(r(842));function N(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(N=function(e){return e?r:t})(e)}function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){(0,h.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r(979);t.default=(0,j.inject)("userStore")((0,j.observer)((function(e){var t=localStorage.getItem(k.LOCALSTORAGE_KEY.AUTH_CONFIG);if(t){var r=JSON.parse(t);if(!r.authType&&-1===r.appName.indexOf("eas"))return P.default.createElement(R.default,{module:"用户",link:"/user"})}var a=e.userStore,n=e.SASSComponentSearch,h=e.saasRefresh,j=void 0!==h&&h,N=e.setSaasRefreshStatus,M=e.bgroup,T=void 0===M?"eas":M,C=a.userData,z=a.getUserList,W=a.deleteUser,F=a.deleteExternalMember,B=a.findUserRoleAdmin,G=a.findRoleUserListQueryByRole,q=a.findUserPageAction,K=a.findUserOrgaList,V=a.findUserGroupList,J=a.findUserDirList,H=a.deleteUserAction,Y=(0,x.useTranslation)().t,Q={pageSize:13,currentPage:1},$=(0,P.useState)(!1),Z=(0,E.default)($,2),X=Z[0],ee=Z[1],te=(0,P.useState)(!1),re=(0,E.default)(te,2),ae=re[0],ne=re[1],ue=(0,P.useState)({}),le=(0,E.default)(ue,2),ie=le[0],oe=le[1],de=(0,P.useState)({pageParam:Q}),ce=(0,E.default)(de,2),fe=ce[0],se=ce[1],pe=(0,P.useState)({}),me=(0,E.default)(pe,2),ge=me[0],ve=me[1],be=(0,P.useState)([]),ye=(0,E.default)(be,2),Oe=ye[0],he=ye[1],we=(0,P.useState)(!1),Ee=(0,E.default)(we,2),Pe=Ee[0],je=Ee[1],_e=(0,P.useState)(null),ke=(0,E.default)(_e,2),xe=ke[0],De=ke[1],Se=(0,P.useState)(null),Ie=(0,E.default)(Se,2),Ue=Ie[0],Ae=Ie[1];(0,P.useEffect)((function(){J().then((function(e){0===e.code&&he(e.data)})),B((0,k.getUser)().userId).then((function(e){0===e.code&&Ae(e.data)}))}),[]),(0,P.useEffect)((function(){j?(Re(),N()):Re()}),[j,fe]);var Re=function(){q(fe).then(function(){var e=(0,w.default)(u.default.mark((function e(t){var r;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code){e.next=6;break}return ve({totalRecord:t.data.totalRecord,totalPage:t.data.totalPage}),e.next=4,Promise.all(Ne(t.data.dataList));case 4:r=e.sent,z(r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},Ne=function(e){return e.map(function(){var e=(0,w.default)(u.default.mark((function e(t){var r,a,n,l,i;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return[],n={userId:t.id,scope:1,type:1},e.next=4,G(n);case 4:return l=e.sent,e.next=7,K(n);case 7:return i=e.sent,0===l.code&&l.data&&(r=l.data.map((function(e){return L(L({},e.role),{},{roleUserId:e.id})})).filter((function(e){return"1"===e.type&&1===e.scope}))),0===i.code&&i.data&&(a=i.data.map((function(e){return L(L({},e.orga),{},{orgaUserId:e.id})}))),e.abrupt("return",L(L({},t),{},{roleList:r,orgaList:a}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},Me=function(e){var t=e.dirId;O.default.confirm({title:"确认删除用户".concat(e.nickname),icon:P.default.createElement(y.default,null),content:"0"===t?"该用户为外部成员，删除用户后，用户将被移出企业":"删除用户后，该用户将被删除且无法登录",okText:"确认",okType:"danger",cancelText:"取消",onOk:function(){Le(e)},onCancel:function(){}})},Le=function(e){var t=e.id;if("0"===e.dirId){var r=new FormData;return r.append("userId",t),r.append("tenantId",(0,k.getUser)().tenant),void F(r).then((function(e){0===e.code&&W(t)}))}var a=new FormData;a.append("id",t),H(a).then((function(e){0===e.code&&W(t)}))},Te=function(e,t){De(L(L({},e),{},{passwordType:t})),je(!0)},Ce=function(e){V({userId:e.id}).then((function(t){0===t.code||t.data?(oe(L(L({},e),{},{groupList:t.data.map((function(e){return L(L({},e.userGroup),{},{groupUserId:e.id})}))})),ne(!0)):(oe(e),ne(!0))}))},ze=[{title:Y("orga-table.nickname"),dataIndex:"nickname",key:"nickname",width:"24%",ellipsis:!0,render:function(e,t){return P.default.createElement(m.default,{className:"user-data-name",onClick:function(){return Ce(t)}},P.default.createElement(S.Profile,{userInfo:t}),e)}},{title:Y("orga-table.name"),dataIndex:"name",key:"name",width:"18%",ellipsis:!0,render:function(e){return e||"--"}},{title:Y("orga-table.org"),dataIndex:"org",key:"org",width:"18%",ellipsis:!0,render:function(e,t){var r=t.orgaList;return r.length>0?P.default.createElement("span",null,r[0].orgaName,r.length>1&&P.default.createElement(P.default.Fragment,null,"(+",r.length-1,")")):"--"}},{title:"角色",dataIndex:"role",key:"role",width:"15%",ellipsis:!0,render:function(e,t){var r=t.roleList;return r.length>0?P.default.createElement("span",null,r[0].name,r.length>1&&P.default.createElement(P.default.Fragment,null,"(+",r.length-1,")")):"--"}},{title:Y("orga-table.type"),dataIndex:"dirId",key:"dirId",width:"15%",ellipsis:!0,render:function(e,t){if("0"===e&&"111111"===t.id)return"个人账号";var r=Oe.findIndex((function(t){return t.id===e}));return r>-1?Oe[r].name:"--"}},{title:Y("orga-common.action"),key:"action",width:"10%",render:function(e,t){return P.default.createElement(m.default,{size:"middle"},P.default.createElement(D.PrivilegeButton,{code:"user_update_user"},P.default.createElement(v.default,{title:"编辑"},P.default.createElement(p.default,{onClick:function(){return Ce(t)},className:"user-data-action"}))),function(e){var t=e.dirId,r=e.roleList;if("0"===t){if(r&&r.length>0&&"111111"===r[0].id)return P.default.createElement(b.default,{className:"user-data-ban"});if(Ue)return P.default.createElement(g.default,{overlay:P.default.createElement("div",{className:"user-dropdown-more"},P.default.createElement(D.PrivilegeButton,{code:"user_delete_user"},P.default.createElement("div",{className:"dropdown-more-item",onClick:function(){return Me(e)}},"删除用户"))),trigger:["click"],placement:"bottomRight"},P.default.createElement(v.default,{title:"更多"},P.default.createElement(b.default,{className:"user-data-action"})))}return"1"===t?r&&r.length>0&&"111111"===r[0].id?P.default.createElement(g.default,{overlay:P.default.createElement("div",{className:"user-dropdown-more"},P.default.createElement("div",{className:"dropdown-more-item",onClick:function(){return Te(e,"update")}},"修改密码")),trigger:["click"],placement:"bottomRight"},P.default.createElement(v.default,{title:"更多"},P.default.createElement(b.default,{className:"user-data-action"}))):P.default.createElement(g.default,{overlay:P.default.createElement("div",{className:"user-dropdown-more"},P.default.createElement("div",{className:"dropdown-more-item",onClick:function(){return Te(e,"update")}},"修改密码"),P.default.createElement("div",{className:"dropdown-more-item",onClick:function(){return Te(e,"reset")}},"找回密码"),P.default.createElement(D.PrivilegeButton,{code:"user_delete_user"},P.default.createElement("div",{className:"dropdown-more-item",onClick:function(){return Me(e)}},"删除用户"))),trigger:["click"],placement:"bottomRight"},P.default.createElement(v.default,{title:"更多"},P.default.createElement(b.default,{className:"user-data-action"}))):P.default.createElement(b.default,{className:"user-data-ban"})}(t))}}];return P.default.createElement(l.default,{className:"user_content"},P.default.createElement(i.default,{sm:{span:"24"},md:{span:"24"},lg:{span:"24"},xl:{span:"22",offset:"1"},xxl:{span:"18",offset:"3"},className:"user_content_detail"},P.default.createElement(S.BreadCrumb,{firstItem:"用户"},P.default.createElement(m.default,{size:"middle"},n,P.default.createElement(D.PrivilegeButton,{code:"user_add_user"},P.default.createElement(S.Btn,{type:"primary",onClick:function(){return ee(!0)},icon:P.default.createElement(s.default,null),title:Y("orga-label.addUser")})))),P.default.createElement("div",{style:{marginBottom:16}},P.default.createElement(c.default,{placeholder:"姓名、用户名、手机号、邮箱",onPressEnter:function(e){return function(e){se(L(L({},fe),{},{accent:e.target.value,pageParam:Q}))}(e)},style:{width:"240px"},prefix:P.default.createElement(f.default,{style:{fontSize:"var(--thoughtware-icon-size-16)"}})})),P.default.createElement(d.default,{columns:ze,dataSource:C,rowKey:function(e){return e.id},pagination:!1}),P.default.createElement(S.Page,{currentPage:fe.pageParam.currentPage,changPage:function(e){var t=L(L({},fe),{},{pageParam:{pageSize:13,currentPage:e}});se(t)},page:ge}),P.default.createElement(I.default,(0,o.default)({},e,{visible:X,setCreateVisible:ee,userDir:Oe,bgroup:T,getUserPage:Re})),P.default.createElement(U.default,(0,o.default)({},e,{visible:ae,setEditVisible:ne,data:(0,_.toJS)(ie),userDir:Oe,bgroup:T,getUserPage:Re})),P.default.createElement(A.default,(0,o.default)({},e,{visible:Pe,setVisible:je,passWordObj:xe,setPassWordObj:De,getUserPage:Re}))))})))},976:function(e,t,r){"use strict";var a=r(26),n=r(149);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(449);var u=a(r(448)),l=a(r(57)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=c(t);if(r&&r.has(e))return r.get(e);var a={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=u?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(a,l,i):a[l]=e[l]}return a.default=e,r&&r.set(e,a),a}(r(0)),o=r(799),d=a(r(899));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}var f=function(e){var t=e.visible,r=e.setCreateVisible,a=e.bgroup,n=e.userDir,c=e.userStore,f=e.getUserPage,s=u.default.useForm(),p=(0,l.default)(s,1)[0],m=function(){p.resetFields(),r(!1)};return i.default.createElement(o.BaseModal,{onOk:function(){p.submit()},onCancel:m,visible:t,title:"添加用户"},i.default.createElement(d.default,{data:{},isEdit:!1,bgroup:a,userDir:n,visible:t,userStore:c,adduserform:p,getUserPage:f,handleCancel:m}))};t.default=(0,i.memo)(f)},977:function(e,t,r){"use strict";var a=r(26),n=r(149);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(873);var u=a(r(866));r(449);var l=a(r(448)),i=a(r(57)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var a={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=u?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(a,l,i):a[l]=e[l]}return a.default=e,r&&r.set(e,a),a}(r(0)),d=r(799),c=a(r(899));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}var s=function(e){var t=e.visible,r=e.setEditVisible,a=e.data,n=void 0===a?{}:a,f=e.userDir,s=e.bgroup,p=e.getUserPage,m=e.userStore,g=l.default.useForm(),v=(0,i.default)(g,1)[0],b=function(){v.resetFields(),r(!1)};return o.default.createElement(u.default,{placement:"right",onClose:b,visible:t,width:420,title:"用户详情",bodyStyle:{padding:0},maskStyle:{background:"transparent"},contentWrapperStyle:{top:48,height:"calc(100% - 48px)"},getContainer:!1},o.default.createElement("div",{className:"user-edit-drawer"},o.default.createElement(c.default,{data:n,isEdit:!0,bgroup:s,visible:t,userDir:f,userStore:m,adduserform:v,getUserPage:p,handleCancel:b}),o.default.createElement("div",{className:"thoughtware_user_footer"},o.default.createElement(d.Btn,{onClick:b,isMar:!0},"取消"),"1"===n.dirId&&o.default.createElement(d.Btn,{type:"primary",onClick:function(){v.submit()}},"保存"))))};t.default=(0,o.memo)(s)},978:function(e,t,r){"use strict";var a=r(26),n=r(149);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(403);var u=a(r(402));r(473);var l=a(r(98)),i=a(r(21));r(449);var o=a(r(448)),d=a(r(57)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var a={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=u?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(a,l,i):a[l]=e[l]}return a.default=e,r&&r.set(e,a),a}(r(0)),f=r(799),s=r(159),p=r(18);function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.default=function(e){var t,r=e.visible,a=e.setVisible,n=e.getUserPage,i=e.passWordObj,m=e.setPassWordObj,g=o.default.useForm(),b=(0,d.default)(g,1)[0],y=(0,c.useState)(null),O=(0,d.default)(y,2),h=O[0],w=O[1],E=function(){a(!1),m(null),w(null),b.resetFields(null)};return c.default.createElement(f.BaseModal,{onOk:function(){b.validateFields().then((function(e){if("update"===(null==i?void 0:i.passwordType))(0,s.updatePassword)(v(v({},e),{},{id:i.id,dirId:i.dirId})).then((function(e){0===e.code?(n(),l.default.info("修改成功")):l.default.info(e.msg),E()}));else{var t;if(h)return E();(0,s.recoverPassword)(v(v({},e),{},{id:i.id,dirId:i.dirId,type:"111111"===(null===(t=(0,p.getUser)())||void 0===t?void 0:t.userId)?1:0})).then((function(e){0===e.code?(n(),w(e.data)):l.default.info(e.msg)}))}}))},onCancel:E,visible:r,title:"update"===(null==i?void 0:i.passwordType)?"修改密码":"找回密码"},c.default.createElement(o.default,{form:b,preserve:!1,layout:"vertical",autoComplete:"off"},"update"===(null==i?void 0:i.passwordType)?c.default.createElement(c.default.Fragment,null,c.default.createElement(o.default.Item,{name:"password",label:"旧密码",rules:[{required:!0,message:"旧密码不能为空"}]},c.default.createElement(u.default.Password,null)),c.default.createElement(o.default.Item,{name:"newPassword",label:"新密码",rules:[{required:!0,message:"新密码不能为空"}]},c.default.createElement(u.default.Password,null))):h?c.default.createElement("div",{className:"user-password-recover-modal"},"新密码为",c.default.createElement("span",{className:"newRecover"},h)):"111111"===(null===(t=(0,p.getUser)())||void 0===t?void 0:t.userId)?c.default.createElement("div",{className:"user-password-recover-modal"},"是否重置",c.default.createElement("span",{className:"newRecover"},null==i?void 0:i.nickname),"的密码"):c.default.createElement(o.default.Item,{name:"name",label:"手机号或邮箱",rules:[{required:!0,message:"手机号或邮箱不能为空"}]},c.default.createElement(u.default,null))))}},979:function(e,t,r){"use strict";r.r(t)},980:function(e,t,r){"use strict";var a=r(26);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(981));t.default=n.default},981:function(e,t,r){"use strict";var a=r(26),n=r(149);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(426);var u=a(r(427));r(424);var l=a(r(425));r(405);var i=a(r(406));r(568);var o=a(r(567)),d=a(r(574));r(436);var c=a(r(434)),f=a(r(467)),s=a(r(433)),p=a(r(57)),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var a={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=u?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(a,l,i):a[l]=e[l]}return a.default=e,r&&r.set(e,a),a}(r(0)),g=r(18),v=a(r(982)),b=a(r(983)),y=r(578),O=a(r(842));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}r(985);t.default=function(e){var t=e.isBase,r=void 0!==t&&t,a=localStorage.getItem(g.LOCALSTORAGE_KEY.AUTH_CONFIG);if(a){var n=JSON.parse(a);if(!n.authType&&-1===n.appName.indexOf("eas"))return m.default.createElement(O.default,{module:"用户",link:"/userGroup"})}var h=(0,m.useState)(!1),w=(0,p.default)(h,2),E=w[0],P=w[1],j=(0,m.useState)(null),_=(0,p.default)(j,2),k=_[0],x=_[1],D=(0,m.useState)([]),S=(0,p.default)(D,2),I=S[0],U=S[1],A=(0,m.useState)(null),R=(0,p.default)(A,2),N=R[0],M=R[1];(0,m.useEffect)((function(){L("init")}),[]);var L=function(e){g.Axios.post("/usergroup/findAllGroup").then((function(t){0===t.code&&(U(t.data),"init"===e&&M(t.data[0]))}))};return m.default.createElement("div",{className:"user-group"},m.default.createElement("div",{className:"user-group-content"},m.default.createElement("div",{className:"user-group-left"},m.default.createElement("div",{className:"user-group-left-title"},m.default.createElement("div",null,"用户组"),m.default.createElement("div",null,m.default.createElement(y.PrivilegeButton,{code:"user_add_group"},m.default.createElement(s.default,{onClick:function(){return x(null),void P(!0)}})))),m.default.createElement(l.default,{className:"user-group-left-data"},I&&I.map((function(e){return m.default.createElement("div",{key:e.id,className:"user-group-item ".concat(e.id===(null==N?void 0:N.id)?"user-group-item-active":""),onClick:function(){return M(e)}},m.default.createElement("div",{className:"user-group-item-name"},e.name),m.default.createElement(i.default,{className:"user-group-item-action"},1!==e.type&&m.default.createElement(y.PrivilegeButton,{code:"user_update_group"},m.default.createElement(c.default,{title:"编辑"},m.default.createElement(f.default,{onClick:function(t){return function(e,t){e.stopPropagation(),x(t),P(!0)}(t,e)}}))),1!==e.type&&m.default.createElement(y.PrivilegeButton,{code:"user_delete_group"},m.default.createElement(c.default,{title:"删除"},m.default.createElement(o.default,{placement:"topRight",title:"你确定删除吗",onConfirm:function(t){return function(e,t){e.stopPropagation();var r=new FormData;r.append("id",t),g.Axios.post("/usergroup/deleteGroup",r).then((function(e){0===e.code&&(t===(null==N?void 0:N.id)?L("init"):L())}))}(t,e.id)},okText:"确定",cancelText:"取消"},m.default.createElement(d.default,{onClick:function(e){return e.stopPropagation()}}))))))})))),m.default.createElement(l.default,{className:"user-group-right"},m.default.createElement(u.default,{xs:{span:"24"},sm:{span:"24"},md:{span:"24"},lg:{span:"24"},xl:{span:"24"},xxl:{span:"20",offset:"2"},className:"user-group-right-main"},m.default.createElement(b.default,{groupData:N})))),m.default.createElement(v.default,{open:E,setOpen:P,data:k,isBase:r,setGroup:M,getUserGroupList:L}))}},982:function(e,t,r){"use strict";var a=r(26),n=r(149);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=a(r(19));r(823);var l=a(r(815));r(403);var i=a(r(402));r(473);var o=a(r(98)),d=a(r(48)),c=a(r(21));r(449);var f=a(r(448)),s=a(r(57)),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var a={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=u?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(a,l,i):a[l]=e[l]}return a.default=e,r&&r.set(e,a),a}(r(0)),m=r(18),g=r(799);function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,c.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.default=function(e){var t=e.isBase,r=e.open,a=e.data,n=e.setOpen,c=e.setGroup,v=e.getUserGroupList,b=f.default.useForm(),O=(0,s.default)(b,1)[0];(0,p.useEffect)((function(){r&&a&&O.setFieldsValue(y({},a))}),[r]);var h=function(){O.resetFields(),n(!1)},w=function(){var e=(0,d.default)(u.default.mark((function e(r){var n,l;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=y(y({},r),{},{group:t?"system":"custom"}),!a){e.next=8;break}return l=y(y({},a),l),e.next=5,m.Axios.post("/usergroup/updateGroup",l);case 5:n=e.sent,e.next=11;break;case 8:return e.next=10,m.Axios.post("/usergroup/createGroup",l);case 10:n=e.sent;case 11:0===n.code?(o.default.success("成功"),h(),v(),c(a?l:y(y({},l),{},{id:n.data}))):o.default.error("失败");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return p.default.createElement(g.BaseModal,{title:"用户组",visible:r,onCancel:h,onOk:function(){O.submit()},destroyOnClose:!0,preserve:!1,forceRender:!0},p.default.createElement(f.default,{form:O,onFinish:w,layout:"vertical"},p.default.createElement(f.default.Item,{label:"用户组名称",name:"name",rules:[{required:!0,message:"用户名不能包含非法字符，如&,%，&，#……等"}]},p.default.createElement(i.default,{placeholder:"名称"})),t&&p.default.createElement(f.default.Item,{label:"设置管理员组",name:"type",initialValue:0},p.default.createElement(l.default.Group,null,p.default.createElement(l.default,{value:0},"普通组"),p.default.createElement(l.default,{value:1},"管理员组"))),p.default.createElement(f.default.Item,{label:"描述",name:"description"},p.default.createElement(i.default,{placeholder:"描述"}))))}},983:function(e,t,r){"use strict";var a=r(26),n=r(149);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(409);var u=a(r(408)),l=a(r(21)),i=a(r(769));r(405);var o=a(r(406)),d=a(r(57)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var a={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=u?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(a,l,i):a[l]=e[l]}return a.default=e,r&&r.set(e,a),a}(r(0)),f=r(18),s=r(94),p=a(r(984)),m=r(578),g=r(799);function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,l.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.default=function(e){var t=e.groupData,r=(0,s.useTranslation)().t,a=(0,c.useState)([]),n=(0,d.default)(a,2),l=n[0],v=n[1],b=(0,c.useState)(!1),O=(0,d.default)(b,2),h=O[0],w=O[1],E=[{title:"姓名",dataIndex:"nickname",width:"25%",ellipsis:!0,render:function(e,t){return c.default.createElement(o.default,null,c.default.createElement(g.Profile,{userInfo:t}),e)}},{title:"用户名",dataIndex:"name",width:"20%",ellipsis:!0},{title:r("orga-table.phone"),dataIndex:"phone",key:"phone",width:"20%",ellipsis:!0,render:function(e){return e||"--"}},{title:r("orga-table.email"),dataIndex:"email",width:"20%",ellipsis:!0,render:function(e){return e||"--"}},{title:r("orga-common.action"),key:"action",width:"10%",render:function(e,t){var r=t.type;return c.default.createElement(m.PrivilegeButton,{code:"user_delete_group_user"},1!==r?c.default.createElement(g.ListAction,{del:function(){return j(t.groupUserLinkUserId)}}):c.default.createElement(i.default,{style:{color:"#999999",fontSize:"16px"}}))}}];(0,c.useEffect)((function(){null!=t&&t.id&&P()}),[t]);var P=function(){var e={groupId:t.id};f.Axios.post("/usergroupUser/findUserList",e).then((function(e){if(0===e.code){var t=e.data.map((function(e){return y(y({},e.user),{},{groupUserLinkUserId:e.id})}));v(t)}}))},j=function(e){var t=new FormData;t.append("id",e),f.Axios.post("/usergroupUser/deleteUser",t).then((function(e){P()}))};return c.default.createElement(c.Fragment,null,c.default.createElement(g.BreadCrumb,{firstItem:(null==t?void 0:t.name)||"用户组"}),c.default.createElement("div",{className:"label_item"},c.default.createElement("label",null,"类型:"),c.default.createElement("span",null,"system"===(null==t?void 0:t.group)?"内置":"自定义")),c.default.createElement("div",{className:"user-group-right-title"},c.default.createElement("div",{className:"main_user"},"用户(",l.length,")"),c.default.createElement(m.PrivilegeButton,{code:"user_add_group_user"},c.default.createElement(g.Btn,{type:"primary",onClick:function(){w(!0)}},"添加用户"))),c.default.createElement(u.default,{columns:E,dataSource:l,rowKey:function(e){return e.id},pagination:!1}),c.default.createElement(p.default,{open:h,setOpen:w,tableData:l,getUserGroupLinkUserList:P,userGroupId:null==t?void 0:t.id,groupUserType:null==t?void 0:t.type}))}},984:function(e,t,r){"use strict";var a=r(26),n=r(149);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(473);var u=a(r(98)),l=a(r(57)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=c(t);if(r&&r.has(e))return r.get(e);var a={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=u?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(a,l,i):a[l]=e[l]}return a.default=e,r&&r.set(e,a),a}(r(0)),o=r(18),d=a(r(853));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}t.default=function(e){var t=e.open,r=e.setOpen,a=e.getUserGroupLinkUserList,n=e.userGroupId,c=e.tableData,f=(0,i.useState)([]),s=(0,l.default)(f,2),p=s[0],m=s[1],g=(0,i.useState)([]),v=(0,l.default)(g,2),b=v[0],y=v[1];(0,i.useEffect)((function(){c&&t&&(m(c.map((function(e){return e.id}))),y(c.map((function(e){return e.id}))))}),[t]);var O=function(){m([]),r(!1)};return i.default.createElement(d.default,{visible:t,allSelectIds:b,selectedRowKeys:p,setSelectedRowKeys:m,handleOk:function(){var e={userGroup:{id:n},userIds:p};o.Axios.post("/usergroupUser/createBatchUser",e).then((function(e){if(0!==e.code)return u.default.error(e.msg);O(),a()}))},handleCancel:O})}},985:function(e,t,r){"use strict";r.r(t)}}]);