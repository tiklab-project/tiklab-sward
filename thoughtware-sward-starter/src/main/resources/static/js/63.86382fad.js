(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{1095:function(e,t,n){"use strict";n.r(t);n(424);var r=n(425),a=(n(429),n(430)),m=n(0),c=n.n(m),u=n(65),o=n(801),l=(n(802),n(861)),i=n(13),s=n(18),N="/Users/yuanjiexuan/Desktop/bate/project-web/thoughtware-sward-ui/src/document/share/components/ShareDocument.js";function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,m=[],c=!0,u=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(m.push(r.value),!t||m.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(u)throw a}}return m}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.default=Object(u.inject)("shareStore","relationWorkStore")(Object(u.observer)(Object(i.h)((function(e){var t=e.shareStore,n=e.relationWorkStore,u=t.documentView,i=t.commentView,f=(t.judgeAuthCode,b(Object(m.useState)(!1),2)),d=f[0],_=f[1],v=b(Object(m.useState)(),2),p=v[0],h=v[1],E=b(Object(m.useState)({name:"",likenumInt:"",commentNumber:""}),2),y=E[0],g=E[1],j=Object(s.getUser)().tenant;return Object(m.useEffect)((function(){i({documentId:e.match.params.id}).then((function(e){})),u({documentId:e.match.params.id}).then((function(e){if(0===e.code){var t,n,r;if(h(),null!==(t=e.data)&&void 0!==t&&t.details)h(null===(r=e.data)||void 0===r?void 0:r.details);else h();g(null===(n=e.data)||void 0===n?void 0:n.node)}}))}),[e.match.params.id]),c.a.createElement("div",{className:"document-share-examine",__source:{fileName:N,lineNumber:53,columnNumber:9}},d&&c.a.createElement(l.a,{documentId:e.match.params.id,setShowComment:_,__source:{fileName:N,lineNumber:55,columnNumber:36}}),c.a.createElement("div",{className:"examine-title",__source:{fileName:N,lineNumber:57,columnNumber:13}},c.a.createElement("span",{className:"examine-name",__source:{fileName:N,lineNumber:58,columnNumber:17}},y.name)),c.a.createElement("div",{className:"examine-content",__source:{fileName:N,lineNumber:60,columnNumber:13}},c.a.createElement(r.default,{style:{flex:1,overflow:"auto"},__source:{fileName:N,lineNumber:61,columnNumber:17}},c.a.createElement(a.default,{className:"repositorydetail-content-col",xl:{span:18,offset:3},lg:{span:20,offset:2},__source:{fileName:N,lineNumber:62,columnNumber:21}},c.a.createElement("div",{style:{paddingTop:"10px"},__source:{fileName:N,lineNumber:63,columnNumber:25}},p&&c.a.createElement(o.PreviewEditor,{value:p,relationWorkStore:n,base_url:"",tenant:j,__source:{fileName:N,lineNumber:65,columnNumber:42}}))))),c.a.createElement("div",{className:"comment-box",__source:{fileName:N,lineNumber:76,columnNumber:13}},c.a.createElement("div",{className:"comment-box-item",__source:{fileName:N,lineNumber:77,columnNumber:17}},c.a.createElement("svg",{className:"midden-icon","aria-hidden":"true",onClick:function(){return _(!d)},__source:{fileName:N,lineNumber:78,columnNumber:21}},c.a.createElement("use",{xlinkHref:"#icon-comment",__source:{fileName:N,lineNumber:79,columnNumber:25}})),c.a.createElement("div",{className:"commnet-num",__source:{fileName:N,lineNumber:81,columnNumber:21}},y.commentNumber))))}))))},804:function(e,t,n){"use strict";var r=n(0),a=n.n(r);t.a=function(e){var t=e.name,n=e.size,r=t?t.charAt(0):"A";return a.a.createElement("div",{className:"big"===n?"user-big-icon":"user-icon",__source:{fileName:"/Users/yuanjiexuan/Desktop/bate/project-web/thoughtware-sward-ui/src/common/UserIcon/UserIcon.js",lineNumber:7,columnNumber:9}},r)}},861:function(e,t,n){"use strict";n(774);var r=n(52),a=n(0),m=n.n(a),c=n(65),u=n(804),o="/Users/yuanjiexuan/Desktop/bate/project-web/thoughtware-sward-ui/src/document/share/components/CommentShare.js";function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,m=[],c=!0,u=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(m.push(r.value),!t||m.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(u)throw a}}return m}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=Object(c.inject)("commentStore","shareStore")(Object(c.observer)((function(e){var t=e.commentStore,n=e.documentId,c=e.setShowComment,i=e.shareStore,s=t.findCommentPage,N=i.commentView,b=l(Object(a.useState)(),2),f=b[0],d=b[1],_=l(Object(a.useState)(10),2),v=_[0],p=_[1],h=l(Object(a.useState)(0),2),E=h[0],y=h[1];Object(a.useEffect)((function(){N({documentId:n,pageParam:{pageSize:1,currentPage:v}}).then((function(e){0===e.code&&(d(e.data),y(e.data.totalPage))}))}),[n]);return m.a.createElement("div",{className:"share-comment",__source:{fileName:o,lineNumber:54,columnNumber:9}},m.a.createElement("div",{className:"comment-top",__source:{fileName:o,lineNumber:55,columnNumber:13}},m.a.createElement("span",{className:"comment-title",__source:{fileName:o,lineNumber:56,columnNumber:17}},"评论"),m.a.createElement("svg",{className:"svg-icon","aria-hidden":"true",onClick:function(){return c(!1)},__source:{fileName:o,lineNumber:57,columnNumber:17}},m.a.createElement("use",{xlinkHref:"#icon-close",__source:{fileName:o,lineNumber:58,columnNumber:21}}))),m.a.createElement("div",{className:"comment-list",__source:{fileName:o,lineNumber:61,columnNumber:13}},f&&f.length>0?m.a.createElement(m.a.Fragment,null,f&&f.map((function(e){return m.a.createElement("div",{className:"comment-item",key:e.id,__source:{fileName:o,lineNumber:66,columnNumber:40}},m.a.createElement("div",{className:"comment-list-top",__source:{fileName:o,lineNumber:67,columnNumber:37}},m.a.createElement("div",{className:"comment-user",__source:{fileName:o,lineNumber:68,columnNumber:41}},m.a.createElement(u.a,{size:"big",name:e.user.nickname,__source:{fileName:o,lineNumber:69,columnNumber:45}}),m.a.createElement("span",{className:"user-name",__source:{fileName:o,lineNumber:70,columnNumber:45}},e.user.name)),m.a.createElement("div",{className:"comment-time",__source:{fileName:o,lineNumber:72,columnNumber:41}},e.createTime.slice(5,16))),m.a.createElement("div",{className:"comment-content",__source:{fileName:o,lineNumber:77,columnNumber:37}},e.details),e.commentList&&e.commentList.map((function(e){return m.a.createElement("div",{className:"comment-item commnet-children-item",key:e.id,__source:{fileName:o,lineNumber:85,columnNumber:52}},m.a.createElement("div",{className:"comment-list-top",__source:{fileName:o,lineNumber:90,columnNumber:49}},m.a.createElement("div",{className:"comment-user",__source:{fileName:o,lineNumber:91,columnNumber:53}},m.a.createElement(u.a,{size:"big",name:e.user.nickname,__source:{fileName:o,lineNumber:92,columnNumber:57}}),m.a.createElement("span",{className:"user-name",__source:{fileName:o,lineNumber:93,columnNumber:57}},e.user.name,"回复了：",e.aimAtUser.name)),m.a.createElement("div",{className:"comment-time",__source:{fileName:o,lineNumber:95,columnNumber:53}},e.createTime.slice(5,16))),m.a.createElement("div",{className:"comment-content",__source:{fileName:o,lineNumber:99,columnNumber:49}},e.details))})))})),E>1&&v<E&&m.a.createElement("div",{className:"comment-more-botton",onClick:function(){return p(e=v+1),void s({documentId:n,pageParam:{pageSize:1,currentPage:e}}).then((function(e){if(0===e.code){var t=f.concat(e.data.dataList);d(t),y(e.data.totalPage)}}));var e},__source:{fileName:o,lineNumber:111,columnNumber:73}},"查看更多...")):m.a.createElement(r.default,{image:"/images/nodata.png",description:"暂时没有评价~",__source:{fileName:o,lineNumber:115,columnNumber:25}})))})))}}]);