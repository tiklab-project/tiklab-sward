(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{1153:function(e,t,n){"use strict";n(239);var r=n(86),a=n(0),m=n.n(a),c=n(148),l=n(938),u="/Users/gaomengyuan/tiklab/tiklab-sward-ui/src/document/share/components/CommentShare.js";function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,m,c,l=[],u=!0,o=!1;try{if(m=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=m.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){o=!0,a=e}finally{try{if(!u&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(o)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=Object(c.inject)("commentStore","shareStore")(Object(c.observer)((function(e){var t=e.commentStore,n=e.documentId,c=e.setShowComment,i=e.shareStore,s=t.findCommentPage,N=i.commentView,b=o(Object(a.useState)(),2),f=b[0],d=b[1],_=o(Object(a.useState)(10),2),v=_[0],p=_[1],h=o(Object(a.useState)(0),2),E=h[0],g=h[1];Object(a.useEffect)((function(){N({documentId:n,pageParam:{pageSize:1,currentPage:v}}).then((function(e){0===e.code&&(d(e.data),g(e.data.totalPage))}))}),[n]);return m.a.createElement("div",{className:"share-comment",__source:{fileName:u,lineNumber:65,columnNumber:9}},m.a.createElement("div",{className:"comment-top",__source:{fileName:u,lineNumber:66,columnNumber:13}},m.a.createElement("span",{className:"comment-title",__source:{fileName:u,lineNumber:67,columnNumber:17}},"评论"),m.a.createElement("svg",{className:"svg-icon","aria-hidden":"true",onClick:function(){return c(!1)},__source:{fileName:u,lineNumber:68,columnNumber:17}},m.a.createElement("use",{xlinkHref:"#icon-close",__source:{fileName:u,lineNumber:69,columnNumber:21}}))),m.a.createElement("div",{className:"comment-list",__source:{fileName:u,lineNumber:72,columnNumber:13}},f&&f.length>0?m.a.createElement(m.a.Fragment,null,f&&f.map((function(e){return m.a.createElement("div",{className:"comment-item",key:e.id,__source:{fileName:u,lineNumber:77,columnNumber:40}},m.a.createElement("div",{className:"comment-list-top",__source:{fileName:u,lineNumber:78,columnNumber:37}},m.a.createElement("div",{className:"comment-user",__source:{fileName:u,lineNumber:79,columnNumber:41}},m.a.createElement(l.a,{size:"big",name:e.user.nickname,__source:{fileName:u,lineNumber:80,columnNumber:45}}),m.a.createElement("span",{className:"user-name",__source:{fileName:u,lineNumber:81,columnNumber:45}},e.user.name)),m.a.createElement("div",{className:"comment-time",__source:{fileName:u,lineNumber:83,columnNumber:41}},e.createTime.slice(5,16))),m.a.createElement("div",{className:"comment-content",__source:{fileName:u,lineNumber:88,columnNumber:37}},e.details),e.commentList&&e.commentList.map((function(e){return m.a.createElement("div",{className:"comment-item commnet-children-item",key:e.id,__source:{fileName:u,lineNumber:96,columnNumber:52}},m.a.createElement("div",{className:"comment-list-top",__source:{fileName:u,lineNumber:101,columnNumber:49}},m.a.createElement("div",{className:"comment-user",__source:{fileName:u,lineNumber:102,columnNumber:53}},m.a.createElement(l.a,{size:"big",name:e.user.nickname,__source:{fileName:u,lineNumber:103,columnNumber:57}}),m.a.createElement("span",{className:"user-name",__source:{fileName:u,lineNumber:104,columnNumber:57}},e.user.name,"回复了：",e.aimAtUser.name)),m.a.createElement("div",{className:"comment-time",__source:{fileName:u,lineNumber:106,columnNumber:53}},e.createTime.slice(5,16))),m.a.createElement("div",{className:"comment-content",__source:{fileName:u,lineNumber:110,columnNumber:49}},e.details))})))})),E>1&&v<E&&m.a.createElement("div",{className:"comment-more-botton",onClick:function(){return p(e=v+1),void s({documentId:n,pageParam:{pageSize:1,currentPage:e}}).then((function(e){if(0===e.code){var t=f.concat(e.data.dataList);d(t),g(e.data.totalPage)}}));var e},__source:{fileName:u,lineNumber:122,columnNumber:73}},"查看更多...")):m.a.createElement(r.default,{description:"暂时没有评价~",__source:{fileName:u,lineNumber:126,columnNumber:25}})))})))},1749:function(e,t,n){"use strict";n.r(t);n(681);var r=n(683),a=(n(682),n(684)),m=n(0),c=n.n(m),l=n(148),u=n(706),o=(n(702),n(1153)),i=n(38),s=n(34),N="/Users/gaomengyuan/tiklab/tiklab-sward-ui/src/document/share/components/ShareDocument.js";function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,m,c,l=[],u=!0,o=!1;try{if(m=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=m.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){o=!0,a=e}finally{try{if(!u&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(o)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.default=Object(l.inject)("shareStore","relationWorkStore")(Object(l.observer)(Object(i.h)((function(e){var t=e.shareStore,n=e.relationWorkStore,l=t.documentView,i=t.commentView,f=b(Object(m.useState)(!1),2),d=f[0],_=f[1],v=b(Object(m.useState)(),2),p=v[0],h=v[1],E=b(Object(m.useState)({name:"",likenumInt:"",commentNumber:""}),2),g=E[0],y=E[1],S=Object(s.getUser)().tenant;return Object(m.useEffect)((function(){i({documentId:e.match.params.id}).then((function(e){})),l({documentId:e.match.params.id}).then((function(e){if(0===e.code){var t,n,r;if(h(),null!==(t=e.data)&&void 0!==t&&t.details)h(null===(r=e.data)||void 0===r?void 0:r.details);else h();y(null===(n=e.data)||void 0===n?void 0:n.node)}}))}),[e.match.params.id]),c.a.createElement("div",{className:"document-share-examine",__source:{fileName:N,lineNumber:48,columnNumber:9}},d&&c.a.createElement(o.a,{documentId:e.match.params.id,setShowComment:_,__source:{fileName:N,lineNumber:50,columnNumber:36}}),c.a.createElement("div",{className:"examine-title",__source:{fileName:N,lineNumber:52,columnNumber:13}},c.a.createElement("span",{className:"examine-name",__source:{fileName:N,lineNumber:53,columnNumber:17}},g.name)),c.a.createElement("div",{className:"examine-content",__source:{fileName:N,lineNumber:55,columnNumber:13}},c.a.createElement(r.default,{style:{flex:1,overflow:"auto"},__source:{fileName:N,lineNumber:56,columnNumber:17}},c.a.createElement(a.default,{className:"repositorydetail-content-col",xs:{span:22,offset:1},xl:{span:18,offset:3},lg:{span:20,offset:2},__source:{fileName:N,lineNumber:57,columnNumber:21}},c.a.createElement("div",{style:{paddingTop:"10px"},__source:{fileName:N,lineNumber:63,columnNumber:25}},p&&c.a.createElement(u.PreviewEditor,{value:p,relationWorkStore:n,base_url:"",img_url:"",viewImageUrl:"/image",tenant:S,__source:{fileName:N,lineNumber:65,columnNumber:42}}))))),c.a.createElement("div",{className:"comment-box",__source:{fileName:N,lineNumber:82,columnNumber:13}},c.a.createElement("div",{className:"comment-box-item",__source:{fileName:N,lineNumber:83,columnNumber:17}},c.a.createElement("svg",{className:"midden-icon","aria-hidden":"true",onClick:function(){return _(!d)},__source:{fileName:N,lineNumber:84,columnNumber:21}},c.a.createElement("use",{xlinkHref:"#icon-comment",__source:{fileName:N,lineNumber:85,columnNumber:25}})),c.a.createElement("div",{className:"commnet-num",__source:{fileName:N,lineNumber:87,columnNumber:21}},g.commentNumber))))}))))},938:function(e,t,n){"use strict";var r=n(0),a=n.n(r);t.a=function(e){var t=e.name,n=e.size,r=t?t.charAt(0):"A";return a.a.createElement("div",{className:"big"===n?"user-big-icon":"user-icon",__source:{fileName:"/Users/gaomengyuan/tiklab/tiklab-sward-ui/src/common/UserIcon/UserIcon.js",lineNumber:15,columnNumber:9}},r)}}}]);