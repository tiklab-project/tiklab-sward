(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{1153:function(e,n,t){"use strict";t(239);var r=t(86),a=t(0),m=t.n(a),c=t(148),l=t(938),u="/Users/gaomengyuan/tiklab/tiklab-sward-ui/src/document/share/components/CommentShare.js";function o(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,m,c,l=[],u=!0,o=!1;try{if(m=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;u=!1}else for(;!(u=(r=m.call(t)).done)&&(l.push(r.value),l.length!==n);u=!0);}catch(e){o=!0,a=e}finally{try{if(!u&&null!=t.return&&(c=t.return(),Object(c)!==c))return}finally{if(o)throw a}}return l}}(e,n)||function(e,n){if(e){if("string"==typeof e)return i(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?i(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}n.a=Object(c.inject)("commentStore","shareStore")(Object(c.observer)((function(e){var n=e.commentStore,t=e.documentId,c=e.setShowComment,i=e.shareStore,s=n.findCommentPage,N=i.commentView,b=o(Object(a.useState)(),2),f=b[0],d=b[1],_=o(Object(a.useState)(10),2),v=_[0],p=_[1],h=o(Object(a.useState)(0),2),y=h[0],E=h[1];Object(a.useEffect)((function(){N({documentId:t,pageParam:{pageSize:1,currentPage:v}}).then((function(e){0===e.code&&(d(e.data),E(e.data.totalPage))}))}),[t]);return m.a.createElement("div",{className:"share-comment",__source:{fileName:u,lineNumber:65,columnNumber:9}},m.a.createElement("div",{className:"comment-top",__source:{fileName:u,lineNumber:66,columnNumber:13}},m.a.createElement("span",{className:"comment-title",__source:{fileName:u,lineNumber:67,columnNumber:17}},"评论"),m.a.createElement("svg",{className:"svg-icon","aria-hidden":"true",onClick:function(){return c(!1)},__source:{fileName:u,lineNumber:68,columnNumber:17}},m.a.createElement("use",{xlinkHref:"#icon-close",__source:{fileName:u,lineNumber:69,columnNumber:21}}))),m.a.createElement("div",{className:"comment-list",__source:{fileName:u,lineNumber:72,columnNumber:13}},f&&f.length>0?m.a.createElement(m.a.Fragment,null,f&&f.map((function(e){return m.a.createElement("div",{className:"comment-item",key:e.id,__source:{fileName:u,lineNumber:77,columnNumber:40}},m.a.createElement("div",{className:"comment-list-top",__source:{fileName:u,lineNumber:78,columnNumber:37}},m.a.createElement("div",{className:"comment-user",__source:{fileName:u,lineNumber:79,columnNumber:41}},m.a.createElement(l.a,{size:"big",name:e.user.nickname,__source:{fileName:u,lineNumber:80,columnNumber:45}}),m.a.createElement("span",{className:"user-name",__source:{fileName:u,lineNumber:81,columnNumber:45}},e.user.name)),m.a.createElement("div",{className:"comment-time",__source:{fileName:u,lineNumber:83,columnNumber:41}},e.createTime.slice(5,16))),m.a.createElement("div",{className:"comment-content",__source:{fileName:u,lineNumber:88,columnNumber:37}},e.details),e.commentList&&e.commentList.map((function(e){return m.a.createElement("div",{className:"comment-item commnet-children-item",key:e.id,__source:{fileName:u,lineNumber:96,columnNumber:52}},m.a.createElement("div",{className:"comment-list-top",__source:{fileName:u,lineNumber:101,columnNumber:49}},m.a.createElement("div",{className:"comment-user",__source:{fileName:u,lineNumber:102,columnNumber:53}},m.a.createElement(l.a,{size:"big",name:e.user.nickname,__source:{fileName:u,lineNumber:103,columnNumber:57}}),m.a.createElement("span",{className:"user-name",__source:{fileName:u,lineNumber:104,columnNumber:57}},e.user.name,"回复了：",e.aimAtUser.name)),m.a.createElement("div",{className:"comment-time",__source:{fileName:u,lineNumber:106,columnNumber:53}},e.createTime.slice(5,16))),m.a.createElement("div",{className:"comment-content",__source:{fileName:u,lineNumber:110,columnNumber:49}},e.details))})))})),y>1&&v<y&&m.a.createElement("div",{className:"comment-more-botton",onClick:function(){return p(e=v+1),void s({documentId:t,pageParam:{pageSize:1,currentPage:e}}).then((function(e){if(0===e.code){var n=f.concat(e.data.dataList);d(n),E(e.data.totalPage)}}));var e},__source:{fileName:u,lineNumber:122,columnNumber:73}},"查看更多...")):m.a.createElement(r.default,{description:"暂时没有评价~",__source:{fileName:u,lineNumber:126,columnNumber:25}})))})))},1752:function(e,n,t){"use strict";t.r(n);t(681);var r=t(683),a=(t(682),t(684)),m=t(0),c=t.n(m),l=t(148),u=t(1105),o=(t(1107),t(1153)),i=t(38),s="/Users/gaomengyuan/tiklab/tiklab-sward-ui/src/document/share/components/ShareMarkdown.js";function N(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,m,c,l=[],u=!0,o=!1;try{if(m=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;u=!1}else for(;!(u=(r=m.call(t)).done)&&(l.push(r.value),l.length!==n);u=!0);}catch(e){o=!0,a=e}finally{try{if(!u&&null!=t.return&&(c=t.return(),Object(c)!==c))return}finally{if(o)throw a}}return l}}(e,n)||function(e,n){if(e){if("string"==typeof e)return b(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?b(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var f=[{type:"code",children:[{type:"paragraph",children:[{text:""}]}]}];n.default=Object(l.inject)("shareStore")(Object(l.observer)(Object(i.h)((function(e){var n=e.shareStore,t=n.documentView,l=n.commentView,i=N(Object(m.useState)(!1),2),b=i[0],d=i[1],_=N(Object(m.useState)(f),2),v=_[0],p=_[1],h=N(Object(m.useState)({name:"",likenumInt:"",commentNumber:""}),2),y=h[0],E=h[1];return Object(m.useEffect)((function(){l({documentId:e.match.params.id}).then((function(e){})),t({documentId:e.match.params.id}).then((function(e){if(0===e.code){var n,t;if(null!==(n=e.data)&&void 0!==n&&n.details){var r,a=null===(r=e.data)||void 0===r?void 0:r.details;p(JSON.parse(a))}else p(f);E(null===(t=e.data)||void 0===t?void 0:t.node)}}))}),[e.match.params.id]),c.a.createElement("div",{className:"markdown-share-examine",__source:{fileName:s,lineNumber:63,columnNumber:9}},c.a.createElement("div",{className:"examine-title",__source:{fileName:s,lineNumber:64,columnNumber:13}},c.a.createElement("span",{className:"examine-name",__source:{fileName:s,lineNumber:65,columnNumber:17}},y.name)),c.a.createElement("div",{className:"examine-content",__source:{fileName:s,lineNumber:67,columnNumber:13}},c.a.createElement(r.default,{style:{flex:1,overflow:"auto"},__source:{fileName:s,lineNumber:68,columnNumber:17}},c.a.createElement(a.default,{className:"repositorydetail-content-col",xs:{span:22,offset:1},xl:{span:18,offset:3},lg:{span:20,offset:2},__source:{fileName:s,lineNumber:69,columnNumber:21}},c.a.createElement("div",{style:{paddingTop:"10px"},__source:{fileName:s,lineNumber:75,columnNumber:25}},c.a.createElement(u.MarkdownView,{value:v,base_url:"",__source:{fileName:s,lineNumber:76,columnNumber:29}})))),b&&c.a.createElement(o.a,{documentId:e.match.params.id,setShowComment:d,__source:{fileName:s,lineNumber:81,columnNumber:36}})),c.a.createElement("div",{className:"comment-box",__source:{fileName:s,lineNumber:86,columnNumber:13}},c.a.createElement("div",{className:"comment-box-item",__source:{fileName:s,lineNumber:87,columnNumber:17}},c.a.createElement("svg",{className:"midden-icon","aria-hidden":"true",onClick:function(){return d(!b)},__source:{fileName:s,lineNumber:88,columnNumber:21}},c.a.createElement("use",{xlinkHref:"#icon-comment",__source:{fileName:s,lineNumber:89,columnNumber:25}})),c.a.createElement("div",{className:"commnet-num",__source:{fileName:s,lineNumber:91,columnNumber:21}},y.commentNumber))))}))))},938:function(e,n,t){"use strict";var r=t(0),a=t.n(r);n.a=function(e){var n=e.name,t=e.size,r=n?n.charAt(0):"A";return a.a.createElement("div",{className:"big"===t?"user-big-icon":"user-icon",__source:{fileName:"/Users/gaomengyuan/tiklab/tiklab-sward-ui/src/common/UserIcon/UserIcon.js",lineNumber:15,columnNumber:9}},r)}}}]);